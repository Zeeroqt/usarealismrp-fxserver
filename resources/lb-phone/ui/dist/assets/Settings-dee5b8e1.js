import{r as P,a as i,j as e,F as A}from"./jsx-runtime-f40812bf.js";import{b as p,I as _,L as s,c as d,g as F,ad as Y,ae as q,af as Z,ag as $,ah as z,a8 as L,h as B,ai as b,aj as J,ak as j,C as O,al as X,am as Q,e as x,f as I,y as M,n as H,an as ee,t as se,l as ie,ao as te,r as ae,ap as ne,aq as le,ar as ce,as as re,at as oe,au as de,av as Se,x as Pe,i as Ne,k as Te}from"./Phone-bbdfbfe1.js";import{r as R}from"./number-28525126.js";import{C as me}from"./Check-ebaab325.js";import{S as K}from"./Slider-8373e24b.js";import{S as U}from"./Switch-51deb5c4.js";import{N as V}from"./Numpad-c596be12.js";function he(a){const c=p(d.Settings),[l,n]=P.useState(!1),N=[.5,.61,.75,.94,1,1.1];return i("div",{className:"animation-slide left",children:[i("div",{className:"top",children:[i("div",{className:"back",onClick:()=>l?n(!1):a.setPage([]),children:[e(_,{}),s("APPS.SETTINGS.TITLE")]}),e("div",{className:"title",children:s("APPS.SETTINGS.DISPLAY_BRIGHTNESS")}),e("div",{})]}),e("div",{style:{marginTop:"2rem"}}),e("div",{className:"category-title",children:s("APPS.SETTINGS.APPEARANCE")}),i("section",{children:[e("div",{className:"settings-item",children:e("div",{className:"appearance-container",children:e("div",{className:"appearance-switches",children:["light","dark"].map((r,o)=>i("div",{className:"mode",onClick:()=>{d.Settings.patch({display:{...c.display,theme:r}})},children:[e("img",{src:`./assets/img/${r}-mode-placeholder.png`,alt:"Theme"}),e("div",{className:"mode-text",children:F(r)}),e(me,{checked:c.display.theme===r})]},o))})})}),i("div",{className:"settings-item",children:[e("div",{className:"setting",children:e("div",{className:"title",children:s("APPS.SETTINGS.AUTOMATIC")})}),e("div",{className:"setting-value",children:e(U,{checked:c.display.automatic,onChange:()=>{d.Settings.patch({display:{...c.display,automatic:!c.display.automatic}})}})})]})]}),e("div",{className:"category-title",children:s("APPS.SETTINGS.BRIGHTNESS")}),e("section",{children:i("div",{className:"settings-item",children:[e(Y,{}),e(K,{onChange:r=>{d.Settings.patch({display:{...c.display,brightness:r}})},value:c.display.brightness,min:.1,max:1,step:.01}),e(q,{})]})}),e("div",{className:"category-title",children:s("APPS.SETTINGS.PHONE_SCALE")}),e("section",{children:i("div",{className:"settings-item",children:[e(Z,{}),e(K,{onChange:r=>{let o=N.reduce(function(m,T){return Math.abs(T-r)<Math.abs(m-r)?T:m});d.Settings.patch({display:{...c.display,size:o}})},value:c.display.size,min:.5,max:1.2,step:.1}),e($,{})]})})]})}function ue(a){var m,T,u,E;const c=p(B),l=p(d.Settings),[n,N]=P.useState(!1),[r,o]=P.useState(null);return i("div",{className:"animation-slide left",children:[i("div",{className:"top",children:[i("div",{className:"back",onClick:()=>{n?N(!1):a.setPage([])},children:[e(_,{}),n?s("APPS.SETTINGS.BACK"):s("APPS.SETTINGS.TITLE")]}),e("div",{className:"title",children:n?c.apps[r].name:s("APPS.SETTINGS.NOTIFICATIONS")}),e("div",{})]}),e("div",{style:{marginTop:"0.5rem"}}),n?e(A,{children:i("section",{children:[i("div",{className:"settings-item",children:[e("div",{className:"setting",children:e("div",{className:"title",children:s("APPS.SETTINGS.ALLOW_NOTIFICATIONS")})}),e("div",{className:"setting-value",children:e(U,{onChange:()=>{var S,h,f;d.Settings.patch({notifications:{...l.notifications,[r]:{...(S=l.notifications)==null?void 0:S[r],enabled:!((f=(h=l.notifications)==null?void 0:h[r])!=null&&f.enabled)}}})},checked:((T=(m=l.notifications)==null?void 0:m[r])==null?void 0:T.enabled)??!0})})]}),i("div",{className:"settings-item",children:[e("div",{className:"setting",children:e("div",{className:"title",children:s("APPS.SETTINGS.SOUNDS")})}),e("div",{className:"setting-value",children:e(U,{onChange:()=>{var S,h,f;d.Settings.patch({notifications:{...l.notifications,[r]:{...(S=l.notifications)==null?void 0:S[r],sound:!((f=(h=l.notifications)==null?void 0:h[r])!=null&&f.sound)}}})},checked:((E=(u=l.notifications)==null?void 0:u[r])==null?void 0:E.sound)??!0})})]})]})}):i(A,{children:[e("div",{className:"category-title",children:s("APPS.SETTINGS.NOTIFICATIONS")}),e("section",{style:{paddingBottom:"4rem"},children:Object.keys(c.apps).filter(S=>{var h;return z(S)||((h=c.apps[S])==null?void 0:h.removable)===!1}).map((S,h)=>i("div",{className:"settings-item",style:{cursor:"pointer"},onClick:()=>{o(S),N(!0)},children:[i("div",{className:"setting",children:[e("img",{src:c.apps[S].icon??`./assets/img/icons/apps/${S}.png`}),e("div",{className:"title",children:c.apps[S].name})]}),e("div",{className:"setting-value",children:e(L,{className:"chevron"})})]},h))})]})]})}function pe(a){var m;const c=p(d.Settings),[l,n]=P.useState(!1),[N,r]=P.useState(null),o=p(B);return i("div",{className:"animation-slide left",children:[i("div",{className:"top",children:[i("div",{className:"back",onClick:()=>{l?n(!1):a.setPage([]),d.SoundManager.reset()},children:[e(_,{}),l?s("APPS.SETTINGS.BACK"):s("APPS.SETTINGS.TITLE")]}),e("div",{className:"title",children:l?N==="ringtone"?s("APPS.SETTINGS.RINGTONE"):s("APPS.SETTINGS.TEXT_TONE"):s("APPS.SETTINGS.SOUND_HAPTICS")}),e("div",{})]}),e("div",{style:{marginTop:"0.5rem"}}),l?i(A,{children:[e("div",{className:"category-title",children:N==="ringtone"?s("APPS.SETTINGS.RINGTONE"):s("APPS.SETTINGS.TEXT_TONE")}),e("section",{children:Object.keys((m=o.sounds)==null?void 0:m[N]).map((T,u)=>e("div",{className:"settings-item",style:{cursor:"pointer"},onClick:()=>{var E,S;d.Settings.patch({sound:{...d.Settings.value.sound,[N]:T}}),d.SoundManager.set({url:`./assets/sound/ringtones/${(S=(E=o.sounds)==null?void 0:E[N])==null?void 0:S[T]}`,timeout:N==="ringtones"?5e3:null,override:!0})},children:i("div",{className:"setting",children:[T==c.sound[N]?e(b,{className:"checkmark"}):e(b,{className:"checkmark hidden"}),e("div",{className:"title",children:F(T)})]})},u))})]}):i(A,{children:[e("div",{className:"category-title",children:s("APPS.SETTINGS.RINGTONE_VOLUME")}),e("section",{children:i("div",{className:"settings-item",children:[e(J,{}),e(K,{onChange:T=>{d.Settings.patch({sound:{...d.Settings.value.sound,volume:T}})},value:c.sound.volume,min:0,max:1,step:.05}),e(j,{})]})}),e("div",{className:"category-title",children:s("APPS.SETTINGS.SOUND_HAPTICS_PATTERNS")}),i("section",{children:[i("div",{className:"settings-item",style:{cursor:"pointer"},onClick:()=>{r("ringtone"),n(!0)},children:[e("div",{className:"setting",children:e("div",{className:"title",children:s("APPS.SETTINGS.RINGTONE")})}),i("div",{className:"setting-value",children:[e("div",{className:"value",children:F(c.sound.ringtone)}),e(L,{className:"chevron"})]})]}),i("div",{className:"settings-item",style:{cursor:"pointer"},children:[e("div",{className:"setting",children:e("div",{className:"title",children:s("APPS.SETTINGS.TEXT_TONE")})}),i("div",{className:"setting-value",children:[e("div",{className:"value",children:s("APPS.SETTINGS.DEFAULT")}),e(L,{className:"chevron"})]})]})]})]})]})}function Ee(a){const{settingsSections:c}=P.useContext(w),l=p(d.Settings),n=p(B),N=8.25*1e3*1e3;return P.useEffect(()=>{if(!n.apps)return;let r=Object.keys(n.apps).filter(m=>{var T;return((T=n.apps[m])==null?void 0:T.removable)===!1}).reduce((m,T)=>m+n.apps[T].size,0),o=l.storage.used-(r+N);B.patch({apps:{...n.apps,Photos:{...n.apps.Photos,size:n.apps.Photos.size+o}}})},[]),i("div",{className:"animation-slide left",children:[i("div",{className:"top",children:[i("div",{className:"back",onClick:()=>{var r;a.setPage((r=c==null?void 0:c[2])==null?void 0:r[0].options)},children:[e(_,{}),s("APPS.SETTINGS.TITLE")]}),e("div",{className:"title",children:s("APPS.SETTINGS.STORAGE")}),e("div",{})]}),e("div",{style:{marginTop:"0.5rem"}}),e("section",{children:i("div",{className:"settings-item",style:{cursor:"pointer"},children:[e("div",{className:"setting",children:e("div",{className:"title",children:s("APPS.SETTINGS.USED")})}),e("div",{className:"setting-value",children:i("div",{className:"value",children:[R(l.storage.used/1e3/1e3,2)," GB ",s("APPS.SETTINGS.OF")," ",R(l.storage.total/1e3/1e3,0)," GB"]})})]})}),e("section",{children:Object.keys(n.apps).filter(r=>{var o;return z(r)||((o=n.apps[r])==null?void 0:o.removable)===!1}).sort((r,o)=>n.apps[o].size-n.apps[r].size).map((r,o)=>i("div",{className:"settings-item",style:{cursor:"pointer"},children:[i("div",{className:"setting",children:[e("img",{src:n.apps[r].icon??`./assets/img/icons/apps/${r}.png`}),e("div",{className:"title",children:n.apps[r].name})]}),e("div",{className:"setting-value",children:e("div",{className:"value",children:n.apps[r].size>1e6?R(n.apps[r].size/1e6,2)+" GB":n.apps[r].size>1e3?R(n.apps[r].size/1e3,2)+" MB":n.apps[r].size+" KB"})})]}))})]})}function ve(a){const c=p(d.Settings),[l,n]=P.useState(!1),N=p(B);return i("div",{className:"animation-slide right",children:[i("div",{className:"top",children:[i("div",{className:"back",onClick:()=>{l?n(!1):a.setPage([])},children:[e(_,{}),l?s("APPS.SETTINGS.WALLPAPER"):s("APPS.SETTINGS.TITLE")]}),i("div",{className:"title",children:[l?s("APPS.SETTINGS.WALLPAPERS"):s("APPS.SETTINGS.WALLPAPER")," "]}),e("div",{})]}),l?i("div",{className:"wallpapers-container",children:[e("div",{className:"wallpaper add",onClick:()=>{var r,o,m;O.Gallery.set({allowExternal:(m=(o=(r=B)==null?void 0:r.value)==null?void 0:o.AllowExternal)==null?void 0:m.Other,onSelect:T=>{d.Settings.patch({wallpaper:{...c.wallpaper,background:T.src}})}})},children:e($,{})}),c.wallpaper.background.includes("http")&&e("div",{className:"wallpaper active",style:{backgroundImage:`url(${c.wallpaper.background})`}}),N.wallpapers.map((r,o)=>e(ge,{wallpaper:r,selected:c.wallpaper.background,theme:c.display.theme,cb:()=>{d.Settings.patch({wallpaper:{...c.wallpaper,background:r}})}},o))]}):e(Ae,{setExploringWallpapers:n})]})}const ge=({wallpaper:a,theme:c,selected:l,cb:n})=>{const[N,r]=P.useState("");return P.useEffect(()=>{X(a,c,o=>r(o))},[]),e("div",{className:`wallpaper ${l===a?"active":""}`,style:{backgroundImage:`url(${N})`},onClick:()=>n()})},Ae=a=>{const[c,l]=P.useState(""),n=p(d.Settings);return P.useEffect(()=>{X(n.wallpaper.background,n.display.theme,N=>l(N))},[]),i("section",{children:[i("div",{className:"settings-item",style:{cursor:"pointer"},onClick:()=>{a.setExploringWallpapers(!0)},children:[e("div",{className:"setting",children:e("div",{className:"title",children:s("APPS.SETTINGS.CHOOSE_NEW_WALLPAPER")})}),e("div",{className:"setting-value",children:e(L,{className:"chevron"})})]}),e("div",{className:"settings-item",children:i("div",{className:"wallpapers",children:[e("div",{className:"preview",style:{backgroundImage:`url(${c})`},children:i("div",{className:"lockscreen-container",children:[e(Q,{}),e("div",{className:"time",children:"13:37"}),e("div",{className:"date",children:"Friday, September 16"})]})}),e("div",{className:"preview",style:{backgroundImage:`url(${c})`}})]})})]})};function Ie(a){const c=P.useRef(null),l=p(d.Settings),[n,N]=P.useState([]),[r,o]=P.useState(!1),[m,T]=P.useState([]),[u,E]=P.useState(!1),S=v=>{if(v=="backspace")N(C=>C.slice(0,-1));else{const C=[...n,v];N([...n,v]),C.length>3&&(u?I("Security",{action:"setPin",pin:C.join("")}).then(g=>{d.Settings.patch({security:{...l.security,pinCode:!0}}),E(!1),N([])}):I("Security",{action:"verifyPin",pin:C.join("")}).then(g=>{g?(o(!0),T(C),N([])):(c.current.className=`pin-circles wrong ${l.display.theme=="dark"?"light":"dark"}`,setTimeout(()=>{c.current.className=`pin-circles ${l.display.theme=="dark"?"light":"dark"}`,N([])},350))}))}},h=v=>{v?I("Security",{action:"setFaceId",pin:m.join("")}).then(C=>{C&&d.Settings.patch({security:{...d.Settings.value.security,faceId:!0}})}):I("Security",{action:"removeFaceId",pin:m.join("")}).then(C=>{C&&d.Settings.patch({security:{...d.Settings.value.security,faceId:!1}})})},f=()=>{I("Security",{action:"removePin",pin:n.join("")}).then(v=>{v&&d.Settings.patch({security:{pinCode:!1,faceId:!1}})})};return i("div",{className:"animation-slide left",children:[i("div",{className:"top",children:[i("div",{className:"back",onClick:()=>{a.setPage([])},children:[e("i",{className:"fal fa-chevron-left"}),r||!l.security.pinCode?s("APPS.SETTINGS.BACK"):s("CANCEL")]}),e("div",{className:"title",children:r||!l.security.pinCode?s("APPS.SETTINGS.FACE_ID_PASSWORD"):s("APPS.SETTINGS.ENTER_PASSCODE")}),e("div",{})]}),r||!l.security.pinCode?e(A,{children:u?i("div",{className:"passcode-container",children:[i("div",{className:"pin",children:[s("APPS.SETTINGS.ENTER_PASSCODE"),e(x,{pin:n,dark:l.display.theme,Ref:c})]}),e("div",{className:"numbers",children:e(V,{cb:v=>{S(v)}})})]}):i(A,{children:[e("div",{style:{marginTop:"0.5rem"}}),e("div",{className:"category-title",children:s("APPS.SETTINGS.FACE_ID")}),e("section",{children:l.security.faceId?e("div",{className:"settings-item",style:{cursor:"pointer"},onClick:()=>{O.PopUp.set({title:s("APPS.SETTINGS.DISABLE_FACE_ID_POPUP.TITLE"),description:s("APPS.SETTINGS.DISABLE_FACE_ID_POPUP.TEXT"),buttons:[{title:s("APPS.SETTINGS.DISABLE_FACE_ID_POPUP.CANCEL")},{title:s("APPS.SETTINGS.DISABLE_FACE_ID_POPUP.CONFIRM"),color:"red",cb:()=>{h(!1)}}]})},children:e("div",{className:"setting",children:e("div",{className:"title red",children:s("APPS.SETTINGS.RESET_FACE_ID")})})}):e("div",{className:"settings-item",style:{cursor:"pointer"},onClick:()=>{l.security.pinCode&&O.PopUp.set({title:s("APPS.SETTINGS.ENABLE_FACE_ID_POPUP.TITLE"),description:s("APPS.SETTINGS.ENABLE_FACE_ID_POPUP.TEXT"),buttons:[{title:s("APPS.SETTINGS.ENABLE_FACE_ID_POPUP.CANCEL")},{title:s("APPS.SETTINGS.ENABLE_FACE_ID_POPUP.CONFIRM"),cb:()=>{h(!0)}}]})},children:e("div",{className:"setting",children:e("div",{className:`title ${l.security.pinCode?"blue":"grey"}`,children:s("APPS.SETTINGS.ENABLE_FACE_ID")})})})}),e("div",{className:"category-title",children:s("APPS.SETTINGS.PIN_CODE")}),e("section",{children:l.security.pinCode?i(A,{children:[e("div",{className:"settings-item",style:{cursor:"pointer"},onClick:()=>{O.PopUp.set({title:s("APPS.SETTINGS.DISABLE_PIN_POPUP.TITLE"),description:s("APPS.SETTINGS.DISABLE_PIN_POPUP.TEXT"),buttons:[{title:s("APPS.SETTINGS.DISABLE_PIN_POPUP.CANCEL")},{title:s("APPS.SETTINGS.DISABLE_PIN_POPUP.CONFIRM"),color:"red",cb:()=>f()}]})},children:e("div",{className:"setting",children:e("div",{className:"title blue",children:s("APPS.SETTINGS.TURN_PASSCODE_OFF")})})}),e("div",{className:"settings-item",style:{cursor:"pointer"},onClick:()=>E(!0),children:e("div",{className:"setting",children:e("div",{className:"title blue",children:s("APPS.SETTINGS.CHANGE_PASSCODE")})})})]}):i(A,{children:[e("div",{className:"settings-item",style:{cursor:"pointer"},onClick:()=>{E(!0)},children:e("div",{className:"setting",children:e("div",{className:"title blue",children:s("APPS.SETTINGS.TURN_PASSCODE_ON")})})}),e("div",{className:"settings-item",children:e("div",{className:"setting",children:e("div",{className:"title grey",children:s("APPS.SETTINGS.CHANGE_PASSCODE")})})})]})})]})}):i("div",{className:"passcode-container",children:[i("div",{className:"pin",children:[s("APPS.SETTINGS.ENTER_PASSCODE"),e(x,{pin:n,dark:l.display.theme,Ref:c})]}),e("div",{className:"numbers",children:e(V,{cb:v=>S(v)})})]})]})}function Ce(a){var E;const c=p(d.Settings),l=p(d.PhoneNumber),[n,N]=P.useState(!1),[r,o]=P.useState(!1),[m,T]=P.useState([]);P.useEffect(()=>{I("Phone",{action:"getBlockedNumbers"}).then(S=>{S&&T(S)})},[]);const u=S=>{I("Phone",{action:"toggleBlock",number:S,blocked:!1}).then(h=>{h&&T(f=>f.filter(v=>v!==S))})};return i("div",{className:`animation-slide ${n?"left":"right"}`,children:[i("div",{className:"top",children:[i("div",{className:"back",onClick:()=>n?N(!1):a.setPage([]),children:[e(_,{}),n?s("APPS.SETTINGS.BACK"):s("APPS.SETTINGS.TITLE")]}),e("div",{className:"title",children:n?s("APPS.SETTINGS.BLOCKED_CONTACTS"):s("APPS.SETTINGS.PHONE")}),n?e("div",{className:"value",onClick:()=>o(S=>!S),children:r?s("APPS.SETTINGS.DONE"):s("APPS.SETTINGS.EDIT")}):e("div",{})]}),e("div",{style:{marginTop:"0.5rem"}}),n?e(A,{children:e("section",{children:m.map((S,h)=>i("div",{className:"settings-item",children:[i("div",{className:"setting",children:[r?e(M,{className:"remove",onClick:()=>{O.PopUp.set({title:s("APPS.SETTINGS.UNBLOCK_POPUP.TITLE"),description:s("APPS.SETTINGS.UNBLOCK_POPUP.TEXT"),buttons:[{title:s("APPS.SETTINGS.UNBLOCK_POPUP.CANCEL")},{title:s("APPS.SETTINGS.UNBLOCK_POPUP.CONFIRM"),color:"red",cb:()=>{u(S)}}]})}}):e(M,{className:"hidden"}),e("div",{className:"title",children:H(S)})]}),e("div",{className:"setting-value"})]},h))})}):i(A,{children:[e("section",{children:i("div",{className:"settings-item",children:[e("div",{className:"setting",children:e("div",{className:"title",children:s("APPS.SETTINGS.MY_NUMBER")})}),i("div",{className:"setting-value",children:[H(l),e(ee,{onClick:()=>{se(l)}})]})]})}),i("section",{children:[i("div",{className:"settings-item",children:[e("div",{className:"setting",children:e("div",{className:"title",children:s("APPS.SETTINGS.SHOW_CALLER_ID")})}),e("div",{className:"setting-value",children:e(U,{onChange:()=>{var S;d.Settings.patch({phone:{...c.phone,showCallerId:!((S=c.phone)!=null&&S.showCallerId)}})},checked:((E=c.phone)==null?void 0:E.showCallerId)??!1})})]}),i("div",{className:"settings-item",style:{cursor:"pointer"},onClick:()=>N(!0),children:[e("div",{className:"setting",children:e("div",{className:"title",children:s("APPS.SETTINGS.BLOCKED_CONTACTS")})}),e("div",{className:"setting-value",children:e(L,{className:"chevron"})})]})]})]})]})}function fe({setPage:a}){const c=p(d.PhoneNumber),[l,n]=P.useState([]),[N,r]=P.useState(!1);return P.useEffect(()=>{I("Backup",{action:"get"}).then(o=>{o&&n(o)})},[]),i("div",{className:"animation-slide left",children:[i("div",{className:"top",children:[i("div",{className:"back",onClick:()=>a([]),children:[e(_,{}),s("APPS.SETTINGS.TITLE")]}),e("div",{className:"title",children:s("APPS.SETTINGS.CLOUD_BACKUP")}),e("div",{className:"value",onClick:()=>r(o=>!o),children:N?s("APPS.SETTINGS.DONE"):s("APPS.SETTINGS.EDIT")})]}),e("div",{style:{marginTop:"0.5rem"}}),e("div",{className:"category-title",children:s("APPS.SETTINGS.YOUR_PROFILE")}),e("section",{children:i("div",{className:"settings-item",style:{cursor:"pointer"},onClick:()=>{l.find(o=>o.number===c)||O.PopUp.set({title:s("APPS.SETTINGS.SAVE_BACKUP_POPUP.TITLE"),description:s("APPS.SETTINGS.SAVE_BACKUP_POPUP.TEXT"),buttons:[{title:s("APPS.SETTINGS.SAVE_BACKUP_POPUP.CANCEL")},{title:s("APPS.SETTINGS.SAVE_BACKUP_POPUP.CONFIRM"),cb:()=>{I("Backup",{action:"create"}).then(o=>{o&&n([{number:c},...l])})}}]})},children:[e("div",{className:"setting",children:e("div",{className:"title",children:s("APPS.SETTINGS.CREATE_BACKUP")})}),e("div",{className:"setting-value"})]})}),e("div",{className:"category-title",children:s("APPS.SETTINGS.BACKUPS")}),e("section",{children:l.map((o,m)=>i("div",{className:"settings-item",style:{cursor:"pointer"},onClick:()=>{O.PopUp.set({title:s("APPS.SETTINGS.APPLY_BACKUP_POPUP.TITLE"),description:s("APPS.SETTINGS.APPLY_BACKUP_POPUP.TEXT"),buttons:[{title:s("APPS.SETTINGS.APPLY_BACKUP_POPUP.CANCEL")},{title:s("APPS.SETTINGS.APPLY_BACKUP_POPUP.CONFIRM"),color:"red",cb:()=>{I("Backup",{action:"apply",number:o.number}).then(T=>{T&&setTimeout(()=>{O.PopUp.set({title:s("APPS.SETTINGS.SUCCESS"),description:s("APPS.SETTINGS.SUCCESS_TEXT"),buttons:[{title:s("APPS.SETTINGS.OK")}]})},500)})}}]})},children:[i("div",{className:"setting",children:[N&&e(M,{className:"remove",onClick:T=>{T.stopPropagation(),O.PopUp.set({title:s("APPS.SETTINGS.REMOVE_BACKUP_POPUP.TITLE"),description:s("APPS.SETTINGS.REMOVE_BACKUP_POPUP.TEXT"),buttons:[{title:s("APPS.SETTINGS.REMOVE_BACKUP_POPUP.CANCEL")},{title:s("APPS.SETTINGS.REMOVE_BACKUP_POPUP.CONFIRM"),color:"red",cb:()=>{I("Backup",{action:"delete",number:o.number}).then(u=>{u&&n(E=>E.filter(S=>S.number!==o.number))})}}]})}}),e("div",{className:"title",children:H(o.number)})]}),e("div",{className:"setting-value"})]},m))})]})}function W({setPage:a,type:c}){const{settingsSections:l}=P.useContext(w);return i("div",{className:"animation-slide left",children:[i("div",{className:"top",children:[i("div",{className:"back",onClick:()=>{var n;return a((n=l==null?void 0:l[2])==null?void 0:n[0].options)},children:[e(_,{}),s("APPS.SETTINGS.TITLE")]}),e("div",{className:"title",children:s(`APPS.SETTINGS.${c.toUpperCase()}`)}),e("div",{})]}),e("div",{style:{marginTop:"0.5rem"}}),i("section",{children:[c==="Language"&&e(Ge,{}),c==="Temperature"&&e(ke,{})]})]})}const Ge=()=>{const a=p(d.Settings),[c,l]=P.useState([]);return P.useEffect(()=>{I("getLocales").then(n=>{n&&l(n)})},[]),P.useEffect(()=>{ie(a.locale)},[a.locale]),i(A,{children:[c.map((n,N)=>e("div",{className:"settings-item",style:{cursor:"pointer"},onClick:()=>d.Settings.patch({locale:n.locale}),children:i("div",{className:"setting",children:[n.locale===a.locale?e(b,{className:"checkmark"}):e(b,{className:"checkmark hidden"}),e("div",{className:"title",children:n.name})]})},N)),";"]})},ke=()=>{const a=p(d.Settings);return i(A,{children:[e("div",{className:"settings-item",style:{cursor:"pointer"},onClick:()=>d.Settings.patch({weather:{celcius:!0}}),children:i("div",{className:"setting",children:[a.weather&&a.weather.celcius?e(b,{className:"checkmark"}):e(b,{className:"checkmark hidden"}),e("div",{className:"title",children:s("APPS.SETTINGS.CELCIUS")})]})}),e("div",{className:"settings-item",style:{cursor:"pointer"},onClick:()=>d.Settings.patch({weather:{celcius:!1}}),children:i("div",{className:"setting",children:[a.weather&&a.weather.celcius===!1?e(b,{className:"checkmark"}):e(b,{className:"checkmark hidden"}),e("div",{className:"title",children:s("APPS.SETTINGS.FAHRENHEIT")})]})})]})};function Oe(a){const{settingsSections:c}=P.useContext(w),l=p(d.Settings);return i("div",{className:"animation-slide left",children:[i("div",{className:"top",children:[i("div",{className:"back",onClick:()=>{var n;return a.setPage((n=c==null?void 0:c[2])==null?void 0:n[0].options)},children:[e(_,{}),s("APPS.SETTINGS.TITLE")]}),e("div",{className:"title",children:s("APPS.SETTINGS.SOFTWARE_UPDATE")}),e("div",{})]}),e("div",{style:{marginTop:"0.5rem"}}),e("section",{children:i("div",{className:"settings-item",style:{cursor:"pointer"},children:[e("div",{className:"setting",children:e("div",{className:"title",children:s("APPS.SETTINGS.AUTOMATIC_UPDATES")})}),e("div",{className:"setting-value",children:e("div",{className:"value",children:s("APPS.SETTINGS.OFF")})})]})}),l.version!==l.latestVersion&&e("section",{children:i("div",{className:"settings-item",style:{flexDirection:"column",alignItems:"inherit",gap:"0.75rem"},children:[i("div",{className:"item-header",children:[e("img",{src:"https://cdn.discordapp.com/attachments/1032954560844660756/1032954807926931496/unknown.png"}),i("div",{className:"info",children:[i("div",{className:"title",children:["V",l.latestVersion]}),e("div",{className:"author",children:e(_e,{})})]})]}),e("div",{className:"item-content",children:"Please tell your server owner to update the phone to the latest version."})]})}),l.version===l.latestVersion&&i("div",{className:"up-to-date",children:[i("div",{className:"version",children:["V ",l==null?void 0:l.version]}),e("div",{className:"title",children:s("APPS.SETTINGS.UP_TO_DATE")})]})]})}const _e=()=>{const a="abcdefghijklmnopqrstuvwxyz".split("");return i(A,{children:[a[11].toUpperCase(),a[1].toUpperCase()]})};const w=P.createContext(null);function De(){var C;const a=p(d.Settings),[c,l]=P.useState(""),[n,N]=P.useState([]),[r,o]=P.useState([]),[m,T]=P.useState(null),[u,E]=P.useState(null),[S,h]=P.useState([]);P.useEffect(()=>{h(g=>{let G=0;return[[{name:s("APPS.SETTINGS.AIRPLANE_MODE"),icon:e(te,{className:"orange"}),switch:!0,value:a.airplaneMode,onChange:()=>{d.Settings.patch({airplaneMode:!a.airplaneMode})}},{name:s("APPS.SETTINGS.STREAMER_MODE"),icon:e(ae,{className:"purple"}),switch:!0,value:a.streamerMode,onChange:()=>{d.Settings.patch({streamerMode:!a.streamerMode})}},{name:s("APPS.SETTINGS.BLUETOOTH"),icon:e(ne,{className:"blue"}),value:s("APPS.SETTINGS.ON")}],[{name:s("APPS.SETTINGS.NOTIFICATIONS"),icon:e(le,{className:"red"}),options:e(ue,{setPage:o})},{name:s("APPS.SETTINGS.SOUND_HAPTICS"),icon:e(j,{className:"pink"}),options:e(pe,{setPage:o})}],[{name:s("APPS.SETTINGS.GENERAL"),icon:e(ce,{className:"grey"}),notification:a.version!==a.latestVersion,options:[[{name:s("APPS.SETTINGS.ABOUT"),options:[[{name:s("APPS.SETTINGS.NAME"),value:a.name,input:{type:"name",maxLength:20},cb:(t,y)=>{I("setPhoneName",t)}},{name:s("APPS.SETTINGS.VERSION"),value:a.version},{name:s("APPS.SETTINGS.MODEL_NAME"),value:"LB Phone"},{name:s("APPS.SETTINGS.SERIAL_NUMBER"),value:"DSDWWWSSF3"},{name:s("APPS.SETTINGS.DEVELOPED_BY"),value:"Breze & Loaf Scripts"},{name:s("APPS.SETTINGS.PURCHASE_AT"),value:"https://lbphone.com",isLink:!0}],[{name:s("APPS.SETTINGS.SONGS"),value:"0"},{name:s("APPS.SETTINGS.VIDEOS"),value:"0"},{name:s("APPS.SETTINGS.PHOTOS"),value:G??0},{name:s("APPS.SETTINGS.APPLICATIONS"),value:f()},{name:s("APPS.SETTINGS.CAPACITY"),value:`${a.storage.total/1e3/1e3} GB`},{name:s("APPS.SETTINGS.AVAILABLE"),value:`${R((a.storage.total-a.storage.used)/1e3/1e3,1)} GB`}]]},{name:s("APPS.SETTINGS.SOFTWARE_UPDATE"),options:e(Oe,{setPage:o}),notification:a.version!==a.latestVersion},{name:s("APPS.SETTINGS.PHONE_STORAGE"),options:e(Ee,{setPage:o})}],[{name:s("APPS.SETTINGS.DATE_TIME"),options:[[{name:s("APPS.SETTINGS.24_HOUR_TIME"),switch:!0,value:!a.time.twelveHourClock,id:"twelveHourClock",onChange:()=>{d.Settings.patch({time:{...a.time,twelveHourClock:!a.time.twelveHourClock}})}}],[{name:s("APPS.SETTINGS.SET_AUTOMATICALLY"),switch:!0,value:!0,disabled:!0},{name:s("APPS.SETTINGS.TIME_ZONE"),value:Intl.DateTimeFormat().resolvedOptions().timeZone??"Unknown"}]]},{name:s("APPS.SETTINGS.LANGUAGE_REGION"),options:[[{name:s("APPS.SETTINGS.LANGUAGE"),value:s("LABEL"),options:e(W,{type:"Language",setPage:o})}],[{name:s("APPS.SETTINGS.TEMPERATURE"),value:a.weather&&a.weather.celcius?"C":"F",options:e(W,{type:"Temperature",setPage:o})}]]}],[{name:s("APPS.SETTINGS.RESET_POPUP.TITLE"),onClick:()=>{O.PopUp.set({title:s("APPS.SETTINGS.RESET_POPUP.TITLE"),description:s("APPS.SETTINGS.RESET_POPUP.TEXT"),buttons:[{title:s("APPS.SETTINGS.RESET_POPUP.CANCEL")},{title:s("APPS.SETTINGS.RESET_POPUP.CONFIRM"),color:"red",cb:()=>{I("Security",{action:"factoryReset"})}}]})}}]]},{name:s("APPS.SETTINGS.DISPLAY_BRIGHTNESS"),icon:e(re,{className:"blue"}),options:e(he,{setPage:o})},{name:s("APPS.SETTINGS.WALLPAPER"),icon:e(oe,{className:"lightblue"}),options:e(ve,{setPage:o})},{name:s("APPS.SETTINGS.FACE_ID_PASSWORD"),icon:e(de,{className:"green"}),options:e(Ie,{setPage:o})},{name:s("APPS.SETTINGS.BATTERY"),icon:e(Se,{className:"green"})}],[{name:s("APPS.SETTINGS.PHONE"),icon:"./assets/img/icons/apps/Phone.png",color:"green",options:e(Ce,{setPage:o}),last:!0}]]})},[a]);const f=()=>{let g=0;return a.apps.forEach(G=>{G.forEach(t=>{g++})}),g},v=P.useRef(!0);return P.useEffect(()=>{if(v.current){v.current=!1;return}I("setSettings",a)},[a]),P.useEffect(()=>{if(c.length>0){let g=S.map(G=>G.filter(t=>{var y;return t.name.toLowerCase().includes(c.toLowerCase())?!0:t.options&&((y=t.options)!=null&&y.name)?t.options.filter(k=>{if(k.name.toLowerCase().includes(c.toLowerCase()))return!0;if(k.options)return k.options.filter(D=>{if(D.name.toLowerCase().includes(c.toLowerCase()))return!0})}):!1}));N(g)}else N([])},[c]),e(w.Provider,{value:{settingsSections:S},children:e("div",{className:"settings-container",children:r.length===0?i("div",{className:"animation-slide right",children:[e("div",{className:"title",style:((C=a==null?void 0:a.display)==null?void 0:C.theme)==="dark"?{color:"#ffffff"}:{color:"#000000"},children:s("APPS.SETTINGS.TITLE")}),e(Pe,{placeholder:s("SEARCH"),onChange:g=>l(g.target.value)}),n.length>0?e("section",{children:n.map((g,G)=>g.map((t,y)=>i("div",{className:"settings-item","data-clickable":!!(t.options||t.onClick),onClick:()=>{if(t.onClick)return t.onClick();t.options&&(o(t.options),T(t.name))},children:[i("div",{className:"setting",children:[t.icon&&(typeof t.icon=="string"?e("img",{src:t.icon}):t.icon),e("div",{className:"title",children:t.name})]}),i("div",{className:"setting-value",children:[t.switch&&e(U,{onChange:t.onChange,checked:t.value,disabled:t.disabled??!1}),t.value&&!t.switch&&e("div",{className:"value",children:t.value}),t.options&&e(L,{className:"chevron"})]})]},y)))}):i(A,{children:[i("div",{className:"profile",onClick:()=>o(e(fe,{setPage:o})),children:[a!=null&&a.avatar?e("img",{src:a.avatar}):e("div",{className:"profile-image",children:Ne(a.name)}),i("div",{className:"profile-info",children:[e("div",{className:"name",children:a.name}),e("div",{className:"info",children:s("APPS.SETTINGS.CLOUD_BACKUP")})]}),e(L,{className:"chevron"})]}),S.map((g,G)=>e("section",{"data-last":G===S.length-1,children:g.map((t,y)=>i("div",{className:"settings-item","data-clickable":!!(t.options||t.onClick),onClick:()=>{if(t.onClick)return t.onClick();t.options&&(o(t.options),T(t.name))},children:[i("div",{className:"setting",children:[t.icon&&(typeof t.icon=="string"?e("img",{src:t.icon}):t.icon),e("div",{className:"title",children:t.name})]}),t.notification&&e("div",{className:"settings-notification",children:"1"}),i("div",{className:"setting-value",children:[t.switch&&e(U,{onChange:t.onChange,checked:t.value,disabled:t.disabled??!1}),t.value&&!t.switch&&e("div",{className:"value",children:t.value}),t.options&&e(L,{className:"chevron"})]})]},y))},G))]})]}):e(A,{children:r.length?i("div",{className:"animation-slide left",children:[i("div",{className:"top",children:[i("div",{className:"back",onClick:()=>{o((u==null?void 0:u.page)??[]),T((u==null?void 0:u.name)??"Settings"),E(null)},children:[e(_,{}),s("APPS.SETTINGS.TITLE")]}),i("div",{className:"title",children:[m??"Settings"," "]}),e("div",{})]}),r.map((g,G)=>e("section",{children:g.map((t,y)=>i("div",{className:"settings-item","data-clickable":!!(t.options||t.onClick),onClick:()=>{var k;if(t.onClick)return t.onClick();t.options&&(o(t.options),T(t.name),(k=t.options)!=null&&k[0]&&E(r))},children:[e("div",{className:"setting",children:e("div",{className:"title",children:t.name})}),t.notification&&e("div",{className:"settings-notification",children:"1"}),e("div",{className:"setting-value",children:t.input?e(Te,{defaultValue:t.value,maxLength:t.input.maxLength,onChange:k=>{let D={...a,[a[t.input.type]]:k.target.value};d.Settings.set(D)},onBlur:()=>{t.cb&&t.cb(a[t.input.type],a)}}):i(A,{children:[t.switch&&e(U,{onChange:()=>{var k;t.id?t.id=="twelveHourClock"&&d.Settings.patch({time:{...a==null?void 0:a.time,twelveHourClock:!((k=a==null?void 0:a.time)!=null&&k.twelveHourClock)}}):t.onChange()},checked:t.value,disabled:t.disabled??!1}),t.value&&e("div",{className:"value",children:t.isLink?e("a",{onClick:()=>window.invokeNative("openUrl",t.value),children:t.value}):t.value}),t.options&&e(L,{className:"chevron"})]})})]},y))},G))]}):r})})})}export{w as AppContext,De as default};
