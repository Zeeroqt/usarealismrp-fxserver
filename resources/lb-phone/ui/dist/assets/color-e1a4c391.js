import{c as D}from"./jsx-runtime-7cf68bf7.js";var Dr={},br={},Or={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.getColorIndex=r.getColorDiffStatus=r.hexDiff=r.rgbDiff=r.deltaE94=r.rgbToCIELab=r.xyzToCIELab=r.rgbToXyz=r.hslToRgb=r.rgbToHsl=r.rgbToHex=r.hexToRgb=r.defer=r.RSHIFT=r.SIGBITS=r.DELTAE94_DIFF_STATUS=void 0,r.DELTAE94_DIFF_STATUS={NA:0,PERFECT:1,CLOSE:2,GOOD:10,SIMILAR:50},r.SIGBITS=5,r.RSHIFT=8-r.SIGBITS;function t(){var u,c,v=new Promise(function(y,p){u=y,c=p});return{resolve:u,reject:c,promise:v}}r.defer=t;function e(u){var c=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(u);return c===null?null:[c[1],c[2],c[3]].map(function(v){return parseInt(v,16)})}r.hexToRgb=e;function a(u,c,v){return"#"+((1<<24)+(u<<16)+(c<<8)+v).toString(16).slice(1,7)}r.rgbToHex=a;function n(u,c,v){u/=255,c/=255,v/=255;var y=Math.max(u,c,v),p=Math.min(u,c,v),_,$,T=(y+p)/2;if(y===p)_=$=0;else{var w=y-p;switch($=T>.5?w/(2-y-p):w/(y+p),y){case u:_=(c-v)/w+(c<v?6:0);break;case c:_=(v-u)/w+2;break;case v:_=(u-c)/w+4;break}_/=6}return[_,$,T]}r.rgbToHsl=n;function i(u,c,v){var y,p,_;function $(j,O,C){return C<0&&(C+=1),C>1&&(C-=1),C<1/6?j+(O-j)*6*C:C<1/2?O:C<2/3?j+(O-j)*(2/3-C)*6:j}if(c===0)y=p=_=v;else{var T=v<.5?v*(1+c):v+c-v*c,w=2*v-T;y=$(w,T,u+1/3),p=$(w,T,u),_=$(w,T,u-1/3)}return[y*255,p*255,_*255]}r.hslToRgb=i;function o(u,c,v){u/=255,c/=255,v/=255,u=u>.04045?Math.pow((u+.005)/1.055,2.4):u/12.92,c=c>.04045?Math.pow((c+.005)/1.055,2.4):c/12.92,v=v>.04045?Math.pow((v+.005)/1.055,2.4):v/12.92,u*=100,c*=100,v*=100;var y=u*.4124+c*.3576+v*.1805,p=u*.2126+c*.7152+v*.0722,_=u*.0193+c*.1192+v*.9505;return[y,p,_]}r.rgbToXyz=o;function s(u,c,v){var y=95.047,p=100,_=108.883;u/=y,c/=p,v/=_,u=u>.008856?Math.pow(u,1/3):7.787*u+16/116,c=c>.008856?Math.pow(c,1/3):7.787*c+16/116,v=v>.008856?Math.pow(v,1/3):7.787*v+16/116;var $=116*c-16,T=500*(u-c),w=200*(c-v);return[$,T,w]}r.xyzToCIELab=s;function l(u,c,v){var y=o(u,c,v),p=y[0],_=y[1],$=y[2];return s(p,_,$)}r.rgbToCIELab=l;function h(u,c){var v=1,y=1,p=1,_=u[0],$=u[1],T=u[2],w=c[0],j=c[1],O=c[2],C=_-w,E=$-j,z=T-O,W=Math.sqrt($*$+T*T),q=Math.sqrt(j*j+O*O),F=w-_,B=q-W,I=Math.sqrt(C*C+E*E+z*z),X=Math.sqrt(I)>Math.sqrt(Math.abs(F))+Math.sqrt(Math.abs(B))?Math.sqrt(I*I-F*F-B*B):0,cr=1+.045*W,lr=1+.015*W;return F/=v,B/=y*cr,X/=p*lr,Math.sqrt(F*F+B*B+X*X)}r.deltaE94=h;function b(u,c){var v=l.apply(void 0,u),y=l.apply(void 0,c);return h(v,y)}r.rgbDiff=b;function d(u,c){var v=e(u),y=e(c);return b(v,y)}r.hexDiff=d;function f(u){return u<r.DELTAE94_DIFF_STATUS.NA?"N/A":u<=r.DELTAE94_DIFF_STATUS.PERFECT?"Perfect":u<=r.DELTAE94_DIFF_STATUS.CLOSE?"Close":u<=r.DELTAE94_DIFF_STATUS.GOOD?"Good":u<r.DELTAE94_DIFF_STATUS.SIMILAR?"Similar":"Wrong"}r.getColorDiffStatus=f;function g(u,c,v){return(u<<2*r.SIGBITS)+(c<<r.SIGBITS)+v}r.getColorIndex=g})(Or);function ca(r,t){for(var e=-1,a=r==null?0:r.length,n=0,i=[];++e<a;){var o=r[e];t(o,e,r)&&(i[n++]=o)}return i}var Te=ca;function la(r){return function(t,e,a){for(var n=-1,i=Object(t),o=a(t),s=o.length;s--;){var l=o[r?s:++n];if(e(i[l],l,i)===!1)break}return t}}var ha=la,va=ha,ga=va(),pa=ga;function ba(r,t){for(var e=-1,a=Array(r);++e<r;)a[e]=t(e);return a}var ya=ba,da=typeof window=="object"&&window&&window.Object===Object&&window,Se=da,_a=Se,ma=typeof self=="object"&&self&&self.Object===Object&&self,$a=_a||ma||Function("return this")(),k=$a,Ta=k,Sa=Ta.Symbol,Cr=Sa,Ct=Cr,we=Object.prototype,wa=we.hasOwnProperty,Aa=we.toString,Sr=Ct?Ct.toStringTag:void 0;function Oa(r){var t=wa.call(r,Sr),e=r[Sr];try{r[Sr]=void 0;var a=!0}catch{}var n=Aa.call(r);return a&&(t?r[Sr]=e:delete r[Sr]),n}var Ca=Oa,Ia=Object.prototype,Pa=Ia.toString;function Ma(r){return Pa.call(r)}var xa=Ma,It=Cr,Da=Ca,ja=xa,La="[object Null]",Ea="[object Undefined]",Pt=It?It.toStringTag:void 0;function Fa(r){return r==null?r===void 0?Ea:La:Pt&&Pt in Object(r)?Da(r):ja(r)}var Ir=Fa;function Ra(r){return r!=null&&typeof r=="object"}var sr=Ra,Ba=Ir,Ua=sr,Na="[object Arguments]";function Ga(r){return Ua(r)&&Ba(r)==Na}var Ha=Ga,Mt=Ha,qa=sr,Ae=Object.prototype,Va=Ae.hasOwnProperty,Ka=Ae.propertyIsEnumerable,za=Mt(function(){return arguments}())?Mt:function(r){return qa(r)&&Va.call(r,"callee")&&!Ka.call(r,"callee")},Oe=za,Wa=Array.isArray,rr=Wa,gr={},Xa={get exports(){return gr},set exports(r){gr=r}};function Ya(){return!1}var Qa=Ya;(function(r,t){var e=k,a=Qa,n=t&&!t.nodeType&&t,i=n&&!0&&r&&!r.nodeType&&r,o=i&&i.exports===n,s=o?e.Buffer:void 0,l=s?s.isBuffer:void 0,h=l||a;r.exports=h})(Xa,gr);var Za=9007199254740991,Ja=/^(?:0|[1-9]\d*)$/;function ka(r,t){var e=typeof r;return t=t??Za,!!t&&(e=="number"||e!="symbol"&&Ja.test(r))&&r>-1&&r%1==0&&r<t}var ut=ka,rn=9007199254740991;function tn(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=rn}var ft=tn,en=Ir,an=ft,nn=sr,on="[object Arguments]",sn="[object Array]",un="[object Boolean]",fn="[object Date]",cn="[object Error]",ln="[object Function]",hn="[object Map]",vn="[object Number]",gn="[object Object]",pn="[object RegExp]",bn="[object Set]",yn="[object String]",dn="[object WeakMap]",_n="[object ArrayBuffer]",mn="[object DataView]",$n="[object Float32Array]",Tn="[object Float64Array]",Sn="[object Int8Array]",wn="[object Int16Array]",An="[object Int32Array]",On="[object Uint8Array]",Cn="[object Uint8ClampedArray]",In="[object Uint16Array]",Pn="[object Uint32Array]",M={};M[$n]=M[Tn]=M[Sn]=M[wn]=M[An]=M[On]=M[Cn]=M[In]=M[Pn]=!0;M[on]=M[sn]=M[_n]=M[un]=M[mn]=M[fn]=M[cn]=M[ln]=M[hn]=M[vn]=M[gn]=M[pn]=M[bn]=M[yn]=M[dn]=!1;function Mn(r){return nn(r)&&an(r.length)&&!!M[en(r)]}var xn=Mn;function Dn(r){return function(t){return r(t)}}var ct=Dn,pr={},jn={get exports(){return pr},set exports(r){pr=r}};(function(r,t){var e=Se,a=t&&!t.nodeType&&t,n=a&&!0&&r&&!r.nodeType&&r,i=n&&n.exports===a,o=i&&e.process,s=function(){try{var l=n&&n.require&&n.require("util").types;return l||o&&o.binding&&o.binding("util")}catch{}}();r.exports=s})(jn,pr);var Ln=xn,En=ct,xt=pr,Dt=xt&&xt.isTypedArray,Fn=Dt?En(Dt):Ln,Ce=Fn,Rn=ya,Bn=Oe,Un=rr,Nn=gr,Gn=ut,Hn=Ce,qn=Object.prototype,Vn=qn.hasOwnProperty;function Kn(r,t){var e=Un(r),a=!e&&Bn(r),n=!e&&!a&&Nn(r),i=!e&&!a&&!n&&Hn(r),o=e||a||n||i,s=o?Rn(r.length,String):[],l=s.length;for(var h in r)(t||Vn.call(r,h))&&!(o&&(h=="length"||n&&(h=="offset"||h=="parent")||i&&(h=="buffer"||h=="byteLength"||h=="byteOffset")||Gn(h,l)))&&s.push(h);return s}var Ie=Kn,zn=Object.prototype;function Wn(r){var t=r&&r.constructor,e=typeof t=="function"&&t.prototype||zn;return r===e}var lt=Wn;function Xn(r,t){return function(e){return r(t(e))}}var Pe=Xn,Yn=Pe,Qn=Yn(Object.keys,Object),Zn=Qn,Jn=lt,kn=Zn,ri=Object.prototype,ti=ri.hasOwnProperty;function ei(r){if(!Jn(r))return kn(r);var t=[];for(var e in Object(r))ti.call(r,e)&&e!="constructor"&&t.push(e);return t}var ai=ei;function ni(r){var t=typeof r;return r!=null&&(t=="object"||t=="function")}var ur=ni,ii=Ir,oi=ur,si="[object AsyncFunction]",ui="[object Function]",fi="[object GeneratorFunction]",ci="[object Proxy]";function li(r){if(!oi(r))return!1;var t=ii(r);return t==ui||t==fi||t==si||t==ci}var Me=li,hi=Me,vi=ft;function gi(r){return r!=null&&vi(r.length)&&!hi(r)}var Ur=gi,pi=Ie,bi=ai,yi=Ur;function di(r){return yi(r)?pi(r):bi(r)}var Pr=di,_i=pa,mi=Pr;function $i(r,t){return r&&_i(r,t,mi)}var Ti=$i,Si=Ur;function wi(r,t){return function(e,a){if(e==null)return e;if(!Si(e))return r(e,a);for(var n=e.length,i=t?n:-1,o=Object(e);(t?i--:++i<n)&&a(o[i],i,o)!==!1;);return e}}var Ai=wi,Oi=Ti,Ci=Ai,Ii=Ci(Oi),Pi=Ii,Mi=Pi;function xi(r,t){var e=[];return Mi(r,function(a,n,i){t(a,n,i)&&e.push(a)}),e}var Di=xi;function ji(){this.__data__=[],this.size=0}var Li=ji;function Ei(r,t){return r===t||r!==r&&t!==t}var Mr=Ei,Fi=Mr;function Ri(r,t){for(var e=r.length;e--;)if(Fi(r[e][0],t))return e;return-1}var Nr=Ri,Bi=Nr,Ui=Array.prototype,Ni=Ui.splice;function Gi(r){var t=this.__data__,e=Bi(t,r);if(e<0)return!1;var a=t.length-1;return e==a?t.pop():Ni.call(t,e,1),--this.size,!0}var Hi=Gi,qi=Nr;function Vi(r){var t=this.__data__,e=qi(t,r);return e<0?void 0:t[e][1]}var Ki=Vi,zi=Nr;function Wi(r){return zi(this.__data__,r)>-1}var Xi=Wi,Yi=Nr;function Qi(r,t){var e=this.__data__,a=Yi(e,r);return a<0?(++this.size,e.push([r,t])):e[a][1]=t,this}var Zi=Qi,Ji=Li,ki=Hi,ro=Ki,to=Xi,eo=Zi;function yr(r){var t=-1,e=r==null?0:r.length;for(this.clear();++t<e;){var a=r[t];this.set(a[0],a[1])}}yr.prototype.clear=Ji;yr.prototype.delete=ki;yr.prototype.get=ro;yr.prototype.has=to;yr.prototype.set=eo;var Gr=yr,ao=Gr;function no(){this.__data__=new ao,this.size=0}var io=no;function oo(r){var t=this.__data__,e=t.delete(r);return this.size=t.size,e}var so=oo;function uo(r){return this.__data__.get(r)}var fo=uo;function co(r){return this.__data__.has(r)}var lo=co,ho=k,vo=ho["__core-js_shared__"],go=vo,Qr=go,jt=function(){var r=/[^.]+$/.exec(Qr&&Qr.keys&&Qr.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function po(r){return!!jt&&jt in r}var bo=po,yo=Function.prototype,_o=yo.toString;function mo(r){if(r!=null){try{return _o.call(r)}catch{}try{return r+""}catch{}}return""}var xe=mo,$o=Me,To=bo,So=ur,wo=xe,Ao=/[\\^$.*+?()[\]{}|]/g,Oo=/^\[object .+?Constructor\]$/,Co=Function.prototype,Io=Object.prototype,Po=Co.toString,Mo=Io.hasOwnProperty,xo=RegExp("^"+Po.call(Mo).replace(Ao,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Do(r){if(!So(r)||To(r))return!1;var t=$o(r)?xo:Oo;return t.test(wo(r))}var jo=Do;function Lo(r,t){return r==null?void 0:r[t]}var Eo=Lo,Fo=jo,Ro=Eo;function Bo(r,t){var e=Ro(r,t);return Fo(e)?e:void 0}var fr=Bo,Uo=fr,No=k,Go=Uo(No,"Map"),ht=Go,Ho=fr,qo=Ho(Object,"create"),Hr=qo,Lt=Hr;function Vo(){this.__data__=Lt?Lt(null):{},this.size=0}var Ko=Vo;function zo(r){var t=this.has(r)&&delete this.__data__[r];return this.size-=t?1:0,t}var Wo=zo,Xo=Hr,Yo="__lodash_hash_undefined__",Qo=Object.prototype,Zo=Qo.hasOwnProperty;function Jo(r){var t=this.__data__;if(Xo){var e=t[r];return e===Yo?void 0:e}return Zo.call(t,r)?t[r]:void 0}var ko=Jo,rs=Hr,ts=Object.prototype,es=ts.hasOwnProperty;function as(r){var t=this.__data__;return rs?t[r]!==void 0:es.call(t,r)}var ns=as,is=Hr,os="__lodash_hash_undefined__";function ss(r,t){var e=this.__data__;return this.size+=this.has(r)?0:1,e[r]=is&&t===void 0?os:t,this}var us=ss,fs=Ko,cs=Wo,ls=ko,hs=ns,vs=us;function dr(r){var t=-1,e=r==null?0:r.length;for(this.clear();++t<e;){var a=r[t];this.set(a[0],a[1])}}dr.prototype.clear=fs;dr.prototype.delete=cs;dr.prototype.get=ls;dr.prototype.has=hs;dr.prototype.set=vs;var gs=dr,Et=gs,ps=Gr,bs=ht;function ys(){this.size=0,this.__data__={hash:new Et,map:new(bs||ps),string:new Et}}var ds=ys;function _s(r){var t=typeof r;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?r!=="__proto__":r===null}var ms=_s,$s=ms;function Ts(r,t){var e=r.__data__;return $s(t)?e[typeof t=="string"?"string":"hash"]:e.map}var qr=Ts,Ss=qr;function ws(r){var t=Ss(this,r).delete(r);return this.size-=t?1:0,t}var As=ws,Os=qr;function Cs(r){return Os(this,r).get(r)}var Is=Cs,Ps=qr;function Ms(r){return Ps(this,r).has(r)}var xs=Ms,Ds=qr;function js(r,t){var e=Ds(this,r),a=e.size;return e.set(r,t),this.size+=e.size==a?0:1,this}var Ls=js,Es=ds,Fs=As,Rs=Is,Bs=xs,Us=Ls;function _r(r){var t=-1,e=r==null?0:r.length;for(this.clear();++t<e;){var a=r[t];this.set(a[0],a[1])}}_r.prototype.clear=Es;_r.prototype.delete=Fs;_r.prototype.get=Rs;_r.prototype.has=Bs;_r.prototype.set=Us;var vt=_r,Ns=Gr,Gs=ht,Hs=vt,qs=200;function Vs(r,t){var e=this.__data__;if(e instanceof Ns){var a=e.__data__;if(!Gs||a.length<qs-1)return a.push([r,t]),this.size=++e.size,this;e=this.__data__=new Hs(a)}return e.set(r,t),this.size=e.size,this}var Ks=Vs,zs=Gr,Ws=io,Xs=so,Ys=fo,Qs=lo,Zs=Ks;function mr(r){var t=this.__data__=new zs(r);this.size=t.size}mr.prototype.clear=Ws;mr.prototype.delete=Xs;mr.prototype.get=Ys;mr.prototype.has=Qs;mr.prototype.set=Zs;var gt=mr,Js="__lodash_hash_undefined__";function ks(r){return this.__data__.set(r,Js),this}var ru=ks;function tu(r){return this.__data__.has(r)}var eu=tu,au=vt,nu=ru,iu=eu;function Fr(r){var t=-1,e=r==null?0:r.length;for(this.__data__=new au;++t<e;)this.add(r[t])}Fr.prototype.add=Fr.prototype.push=nu;Fr.prototype.has=iu;var ou=Fr;function su(r,t){for(var e=-1,a=r==null?0:r.length;++e<a;)if(t(r[e],e,r))return!0;return!1}var uu=su;function fu(r,t){return r.has(t)}var cu=fu,lu=ou,hu=uu,vu=cu,gu=1,pu=2;function bu(r,t,e,a,n,i){var o=e&gu,s=r.length,l=t.length;if(s!=l&&!(o&&l>s))return!1;var h=i.get(r),b=i.get(t);if(h&&b)return h==t&&b==r;var d=-1,f=!0,g=e&pu?new lu:void 0;for(i.set(r,t),i.set(t,r);++d<s;){var u=r[d],c=t[d];if(a)var v=o?a(c,u,d,t,r,i):a(u,c,d,r,t,i);if(v!==void 0){if(v)continue;f=!1;break}if(g){if(!hu(t,function(y,p){if(!vu(g,p)&&(u===y||n(u,y,e,a,i)))return g.push(p)})){f=!1;break}}else if(!(u===c||n(u,c,e,a,i))){f=!1;break}}return i.delete(r),i.delete(t),f}var De=bu,yu=k,du=yu.Uint8Array,je=du;function _u(r){var t=-1,e=Array(r.size);return r.forEach(function(a,n){e[++t]=[n,a]}),e}var mu=_u;function $u(r){var t=-1,e=Array(r.size);return r.forEach(function(a){e[++t]=a}),e}var Tu=$u,Ft=Cr,Rt=je,Su=Mr,wu=De,Au=mu,Ou=Tu,Cu=1,Iu=2,Pu="[object Boolean]",Mu="[object Date]",xu="[object Error]",Du="[object Map]",ju="[object Number]",Lu="[object RegExp]",Eu="[object Set]",Fu="[object String]",Ru="[object Symbol]",Bu="[object ArrayBuffer]",Uu="[object DataView]",Bt=Ft?Ft.prototype:void 0,Zr=Bt?Bt.valueOf:void 0;function Nu(r,t,e,a,n,i,o){switch(e){case Uu:if(r.byteLength!=t.byteLength||r.byteOffset!=t.byteOffset)return!1;r=r.buffer,t=t.buffer;case Bu:return!(r.byteLength!=t.byteLength||!i(new Rt(r),new Rt(t)));case Pu:case Mu:case ju:return Su(+r,+t);case xu:return r.name==t.name&&r.message==t.message;case Lu:case Fu:return r==t+"";case Du:var s=Au;case Eu:var l=a&Cu;if(s||(s=Ou),r.size!=t.size&&!l)return!1;var h=o.get(r);if(h)return h==t;a|=Iu,o.set(r,t);var b=wu(s(r),s(t),a,n,i,o);return o.delete(r),b;case Ru:if(Zr)return Zr.call(r)==Zr.call(t)}return!1}var Gu=Nu;function Hu(r,t){for(var e=-1,a=t.length,n=r.length;++e<a;)r[n+e]=t[e];return r}var Le=Hu,qu=Le,Vu=rr;function Ku(r,t,e){var a=t(r);return Vu(r)?a:qu(a,e(r))}var Ee=Ku;function zu(){return[]}var Fe=zu,Wu=Te,Xu=Fe,Yu=Object.prototype,Qu=Yu.propertyIsEnumerable,Ut=Object.getOwnPropertySymbols,Zu=Ut?function(r){return r==null?[]:(r=Object(r),Wu(Ut(r),function(t){return Qu.call(r,t)}))}:Xu,pt=Zu,Ju=Ee,ku=pt,rf=Pr;function tf(r){return Ju(r,rf,ku)}var Re=tf,Nt=Re,ef=1,af=Object.prototype,nf=af.hasOwnProperty;function of(r,t,e,a,n,i){var o=e&ef,s=Nt(r),l=s.length,h=Nt(t),b=h.length;if(l!=b&&!o)return!1;for(var d=l;d--;){var f=s[d];if(!(o?f in t:nf.call(t,f)))return!1}var g=i.get(r),u=i.get(t);if(g&&u)return g==t&&u==r;var c=!0;i.set(r,t),i.set(t,r);for(var v=o;++d<l;){f=s[d];var y=r[f],p=t[f];if(a)var _=o?a(p,y,f,t,r,i):a(y,p,f,r,t,i);if(!(_===void 0?y===p||n(y,p,e,a,i):_)){c=!1;break}v||(v=f=="constructor")}if(c&&!v){var $=r.constructor,T=t.constructor;$!=T&&"constructor"in r&&"constructor"in t&&!(typeof $=="function"&&$ instanceof $&&typeof T=="function"&&T instanceof T)&&(c=!1)}return i.delete(r),i.delete(t),c}var sf=of,uf=fr,ff=k,cf=uf(ff,"DataView"),lf=cf,hf=fr,vf=k,gf=hf(vf,"Promise"),pf=gf,bf=fr,yf=k,df=bf(yf,"Set"),_f=df,mf=fr,$f=k,Tf=mf($f,"WeakMap"),Sf=Tf,kr=lf,rt=ht,tt=pf,et=_f,at=Sf,Be=Ir,$r=xe,Gt="[object Map]",wf="[object Object]",Ht="[object Promise]",qt="[object Set]",Vt="[object WeakMap]",Kt="[object DataView]",Af=$r(kr),Of=$r(rt),Cf=$r(tt),If=$r(et),Pf=$r(at),or=Be;(kr&&or(new kr(new ArrayBuffer(1)))!=Kt||rt&&or(new rt)!=Gt||tt&&or(tt.resolve())!=Ht||et&&or(new et)!=qt||at&&or(new at)!=Vt)&&(or=function(r){var t=Be(r),e=t==wf?r.constructor:void 0,a=e?$r(e):"";if(a)switch(a){case Af:return Kt;case Of:return Gt;case Cf:return Ht;case If:return qt;case Pf:return Vt}return t});var Vr=or,Jr=gt,Mf=De,xf=Gu,Df=sf,zt=Vr,Wt=rr,Xt=gr,jf=Ce,Lf=1,Yt="[object Arguments]",Qt="[object Array]",jr="[object Object]",Ef=Object.prototype,Zt=Ef.hasOwnProperty;function Ff(r,t,e,a,n,i){var o=Wt(r),s=Wt(t),l=o?Qt:zt(r),h=s?Qt:zt(t);l=l==Yt?jr:l,h=h==Yt?jr:h;var b=l==jr,d=h==jr,f=l==h;if(f&&Xt(r)){if(!Xt(t))return!1;o=!0,b=!1}if(f&&!b)return i||(i=new Jr),o||jf(r)?Mf(r,t,e,a,n,i):xf(r,t,l,e,a,n,i);if(!(e&Lf)){var g=b&&Zt.call(r,"__wrapped__"),u=d&&Zt.call(t,"__wrapped__");if(g||u){var c=g?r.value():r,v=u?t.value():t;return i||(i=new Jr),n(c,v,e,a,i)}}return f?(i||(i=new Jr),Df(r,t,e,a,n,i)):!1}var Rf=Ff,Bf=Rf,Jt=sr;function Ue(r,t,e,a,n){return r===t?!0:r==null||t==null||!Jt(r)&&!Jt(t)?r!==r&&t!==t:Bf(r,t,e,a,Ue,n)}var Ne=Ue,Uf=gt,Nf=Ne,Gf=1,Hf=2;function qf(r,t,e,a){var n=e.length,i=n,o=!a;if(r==null)return!i;for(r=Object(r);n--;){var s=e[n];if(o&&s[2]?s[1]!==r[s[0]]:!(s[0]in r))return!1}for(;++n<i;){s=e[n];var l=s[0],h=r[l],b=s[1];if(o&&s[2]){if(h===void 0&&!(l in r))return!1}else{var d=new Uf;if(a)var f=a(h,b,l,r,t,d);if(!(f===void 0?Nf(b,h,Gf|Hf,a,d):f))return!1}}return!0}var Vf=qf,Kf=ur;function zf(r){return r===r&&!Kf(r)}var Ge=zf,Wf=Ge,Xf=Pr;function Yf(r){for(var t=Xf(r),e=t.length;e--;){var a=t[e],n=r[a];t[e]=[a,n,Wf(n)]}return t}var Qf=Yf;function Zf(r,t){return function(e){return e==null?!1:e[r]===t&&(t!==void 0||r in Object(e))}}var He=Zf,Jf=Vf,kf=Qf,rc=He;function tc(r){var t=kf(r);return t.length==1&&t[0][2]?rc(t[0][0],t[0][1]):function(e){return e===r||Jf(e,r,t)}}var ec=tc,ac=Ir,nc=sr,ic="[object Symbol]";function oc(r){return typeof r=="symbol"||nc(r)&&ac(r)==ic}var bt=oc,sc=rr,uc=bt,fc=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,cc=/^\w*$/;function lc(r,t){if(sc(r))return!1;var e=typeof r;return e=="number"||e=="symbol"||e=="boolean"||r==null||uc(r)?!0:cc.test(r)||!fc.test(r)||t!=null&&r in Object(t)}var yt=lc,qe=vt,hc="Expected a function";function dt(r,t){if(typeof r!="function"||t!=null&&typeof t!="function")throw new TypeError(hc);var e=function(){var a=arguments,n=t?t.apply(this,a):a[0],i=e.cache;if(i.has(n))return i.get(n);var o=r.apply(this,a);return e.cache=i.set(n,o)||i,o};return e.cache=new(dt.Cache||qe),e}dt.Cache=qe;var vc=dt,gc=vc,pc=500;function bc(r){var t=gc(r,function(a){return e.size===pc&&e.clear(),a}),e=t.cache;return t}var yc=bc,dc=yc,_c=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,mc=/\\(\\)?/g,$c=dc(function(r){var t=[];return r.charCodeAt(0)===46&&t.push(""),r.replace(_c,function(e,a,n,i){t.push(n?i.replace(mc,"$1"):a||e)}),t}),Tc=$c;function Sc(r,t){for(var e=-1,a=r==null?0:r.length,n=Array(a);++e<a;)n[e]=t(r[e],e,r);return n}var wc=Sc,kt=Cr,Ac=wc,Oc=rr,Cc=bt,Ic=1/0,re=kt?kt.prototype:void 0,te=re?re.toString:void 0;function Ve(r){if(typeof r=="string")return r;if(Oc(r))return Ac(r,Ve)+"";if(Cc(r))return te?te.call(r):"";var t=r+"";return t=="0"&&1/r==-Ic?"-0":t}var Pc=Ve,Mc=Pc;function xc(r){return r==null?"":Mc(r)}var Dc=xc,jc=rr,Lc=yt,Ec=Tc,Fc=Dc;function Rc(r,t){return jc(r)?r:Lc(r,t)?[r]:Ec(Fc(r))}var Ke=Rc,Bc=bt,Uc=1/0;function Nc(r){if(typeof r=="string"||Bc(r))return r;var t=r+"";return t=="0"&&1/r==-Uc?"-0":t}var Kr=Nc,Gc=Ke,Hc=Kr;function qc(r,t){t=Gc(t,r);for(var e=0,a=t.length;r!=null&&e<a;)r=r[Hc(t[e++])];return e&&e==a?r:void 0}var ze=qc,Vc=ze;function Kc(r,t,e){var a=r==null?void 0:Vc(r,t);return a===void 0?e:a}var zc=Kc;function Wc(r,t){return r!=null&&t in Object(r)}var Xc=Wc,Yc=Ke,Qc=Oe,Zc=rr,Jc=ut,kc=ft,rl=Kr;function tl(r,t,e){t=Yc(t,r);for(var a=-1,n=t.length,i=!1;++a<n;){var o=rl(t[a]);if(!(i=r!=null&&e(r,o)))break;r=r[o]}return i||++a!=n?i:(n=r==null?0:r.length,!!n&&kc(n)&&Jc(o,n)&&(Zc(r)||Qc(r)))}var el=tl,al=Xc,nl=el;function il(r,t){return r!=null&&nl(r,t,al)}var ol=il,sl=Ne,ul=zc,fl=ol,cl=yt,ll=Ge,hl=He,vl=Kr,gl=1,pl=2;function bl(r,t){return cl(r)&&ll(t)?hl(vl(r),t):function(e){var a=ul(e,r);return a===void 0&&a===t?fl(e,r):sl(t,a,gl|pl)}}var yl=bl;function dl(r){return r}var _t=dl;function _l(r){return function(t){return t==null?void 0:t[r]}}var ml=_l,$l=ze;function Tl(r){return function(t){return $l(t,r)}}var Sl=Tl,wl=ml,Al=Sl,Ol=yt,Cl=Kr;function Il(r){return Ol(r)?wl(Cl(r)):Al(r)}var Pl=Il,Ml=ec,xl=yl,Dl=_t,jl=rr,Ll=Pl;function El(r){return typeof r=="function"?r:r==null?Dl:typeof r=="object"?jl(r)?xl(r[0],r[1]):Ml(r):Ll(r)}var Fl=El,Rl=Te,Bl=Di,Ul=Fl,Nl=rr;function Gl(r,t){var e=Nl(r)?Rl:Bl;return e(r,Ul(t))}var Hl=Gl;Object.defineProperty(br,"__esModule",{value:!0});br.Swatch=void 0;var ee=Or,ql=Hl,Vl=function(){function r(t,e){this._rgb=t,this._population=e}return r.applyFilter=function(t,e){return typeof e=="function"?ql(t,function(a){var n=a.r,i=a.g,o=a.b;return e(n,i,o,255)}):t},Object.defineProperty(r.prototype,"r",{get:function(){return this._rgb[0]},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"g",{get:function(){return this._rgb[1]},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"b",{get:function(){return this._rgb[2]},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"rgb",{get:function(){return this._rgb},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"hsl",{get:function(){if(!this._hsl){var t=this._rgb,e=t[0],a=t[1],n=t[2];this._hsl=ee.rgbToHsl(e,a,n)}return this._hsl},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"hex",{get:function(){if(!this._hex){var t=this._rgb,e=t[0],a=t[1],n=t[2];this._hex=ee.rgbToHex(e,a,n)}return this._hex},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"population",{get:function(){return this._population},enumerable:!1,configurable:!0}),r.prototype.toJSON=function(){return{rgb:this.rgb,population:this.population}},r.prototype.getRgb=function(){return this._rgb},r.prototype.getHsl=function(){return this.hsl},r.prototype.getPopulation=function(){return this._population},r.prototype.getHex=function(){return this.hex},r.prototype.getYiq=function(){if(!this._yiq){var t=this._rgb;this._yiq=(t[0]*299+t[1]*587+t[2]*114)/1e3}return this._yiq},Object.defineProperty(r.prototype,"titleTextColor",{get:function(){return this._titleTextColor||(this._titleTextColor=this.getYiq()<200?"#fff":"#000"),this._titleTextColor},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"bodyTextColor",{get:function(){return this._bodyTextColor||(this._bodyTextColor=this.getYiq()<150?"#fff":"#000"),this._bodyTextColor},enumerable:!1,configurable:!0}),r.prototype.getTitleTextColor=function(){return this.titleTextColor},r.prototype.getBodyTextColor=function(){return this.bodyTextColor},r}();br.Swatch=Vl;var Lr={};function Kl(r,t){for(var e=-1,a=r==null?0:r.length;++e<a&&t(r[e],e,r)!==!1;);return r}var zl=Kl,Wl=fr,Xl=function(){try{var r=Wl(Object,"defineProperty");return r({},"",{}),r}catch{}}(),We=Xl,ae=We;function Yl(r,t,e){t=="__proto__"&&ae?ae(r,t,{configurable:!0,enumerable:!0,value:e,writable:!0}):r[t]=e}var Xe=Yl,Ql=Xe,Zl=Mr,Jl=Object.prototype,kl=Jl.hasOwnProperty;function rh(r,t,e){var a=r[t];(!(kl.call(r,t)&&Zl(a,e))||e===void 0&&!(t in r))&&Ql(r,t,e)}var Ye=rh,th=Ye,eh=Xe;function ah(r,t,e,a){var n=!e;e||(e={});for(var i=-1,o=t.length;++i<o;){var s=t[i],l=a?a(e[s],r[s],s,e,r):void 0;l===void 0&&(l=r[s]),n?eh(e,s,l):th(e,s,l)}return e}var zr=ah,nh=zr,ih=Pr;function oh(r,t){return r&&nh(t,ih(t),r)}var sh=oh;function uh(r){var t=[];if(r!=null)for(var e in Object(r))t.push(e);return t}var fh=uh,ch=ur,lh=lt,hh=fh,vh=Object.prototype,gh=vh.hasOwnProperty;function ph(r){if(!ch(r))return hh(r);var t=lh(r),e=[];for(var a in r)a=="constructor"&&(t||!gh.call(r,a))||e.push(a);return e}var bh=ph,yh=Ie,dh=bh,_h=Ur;function mh(r){return _h(r)?yh(r,!0):dh(r)}var Wr=mh,$h=zr,Th=Wr;function Sh(r,t){return r&&$h(t,Th(t),r)}var wh=Sh,Rr={},Ah={get exports(){return Rr},set exports(r){Rr=r}};(function(r,t){var e=k,a=t&&!t.nodeType&&t,n=a&&!0&&r&&!r.nodeType&&r,i=n&&n.exports===a,o=i?e.Buffer:void 0,s=o?o.allocUnsafe:void 0;function l(h,b){if(b)return h.slice();var d=h.length,f=s?s(d):new h.constructor(d);return h.copy(f),f}r.exports=l})(Ah,Rr);function Oh(r,t){var e=-1,a=r.length;for(t||(t=Array(a));++e<a;)t[e]=r[e];return t}var Ch=Oh,Ih=zr,Ph=pt;function Mh(r,t){return Ih(r,Ph(r),t)}var xh=Mh,Dh=Pe,jh=Dh(Object.getPrototypeOf,Object),Qe=jh,Lh=Le,Eh=Qe,Fh=pt,Rh=Fe,Bh=Object.getOwnPropertySymbols,Uh=Bh?function(r){for(var t=[];r;)Lh(t,Fh(r)),r=Eh(r);return t}:Rh,Ze=Uh,Nh=zr,Gh=Ze;function Hh(r,t){return Nh(r,Gh(r),t)}var qh=Hh,Vh=Ee,Kh=Ze,zh=Wr;function Wh(r){return Vh(r,zh,Kh)}var Xh=Wh,Yh=Object.prototype,Qh=Yh.hasOwnProperty;function Zh(r){var t=r.length,e=new r.constructor(t);return t&&typeof r[0]=="string"&&Qh.call(r,"index")&&(e.index=r.index,e.input=r.input),e}var Jh=Zh,ne=je;function kh(r){var t=new r.constructor(r.byteLength);return new ne(t).set(new ne(r)),t}var mt=kh,rv=mt;function tv(r,t){var e=t?rv(r.buffer):r.buffer;return new r.constructor(e,r.byteOffset,r.byteLength)}var ev=tv,av=/\w*$/;function nv(r){var t=new r.constructor(r.source,av.exec(r));return t.lastIndex=r.lastIndex,t}var iv=nv,ie=Cr,oe=ie?ie.prototype:void 0,se=oe?oe.valueOf:void 0;function ov(r){return se?Object(se.call(r)):{}}var sv=ov,uv=mt;function fv(r,t){var e=t?uv(r.buffer):r.buffer;return new r.constructor(e,r.byteOffset,r.length)}var cv=fv,lv=mt,hv=ev,vv=iv,gv=sv,pv=cv,bv="[object Boolean]",yv="[object Date]",dv="[object Map]",_v="[object Number]",mv="[object RegExp]",$v="[object Set]",Tv="[object String]",Sv="[object Symbol]",wv="[object ArrayBuffer]",Av="[object DataView]",Ov="[object Float32Array]",Cv="[object Float64Array]",Iv="[object Int8Array]",Pv="[object Int16Array]",Mv="[object Int32Array]",xv="[object Uint8Array]",Dv="[object Uint8ClampedArray]",jv="[object Uint16Array]",Lv="[object Uint32Array]";function Ev(r,t,e){var a=r.constructor;switch(t){case wv:return lv(r);case bv:case yv:return new a(+r);case Av:return hv(r,e);case Ov:case Cv:case Iv:case Pv:case Mv:case xv:case Dv:case jv:case Lv:return pv(r,e);case dv:return new a;case _v:case Tv:return new a(r);case mv:return vv(r);case $v:return new a;case Sv:return gv(r)}}var Fv=Ev,Rv=ur,ue=Object.create,Bv=function(){function r(){}return function(t){if(!Rv(t))return{};if(ue)return ue(t);r.prototype=t;var e=new r;return r.prototype=void 0,e}}(),Uv=Bv,Nv=Uv,Gv=Qe,Hv=lt;function qv(r){return typeof r.constructor=="function"&&!Hv(r)?Nv(Gv(r)):{}}var Vv=qv,Kv=Vr,zv=sr,Wv="[object Map]";function Xv(r){return zv(r)&&Kv(r)==Wv}var Yv=Xv,Qv=Yv,Zv=ct,fe=pr,ce=fe&&fe.isMap,Jv=ce?Zv(ce):Qv,kv=Jv,rg=Vr,tg=sr,eg="[object Set]";function ag(r){return tg(r)&&rg(r)==eg}var ng=ag,ig=ng,og=ct,le=pr,he=le&&le.isSet,sg=he?og(he):ig,ug=sg,fg=gt,cg=zl,lg=Ye,hg=sh,vg=wh,gg=Rr,pg=Ch,bg=xh,yg=qh,dg=Re,_g=Xh,mg=Vr,$g=Jh,Tg=Fv,Sg=Vv,wg=rr,Ag=gr,Og=kv,Cg=ur,Ig=ug,Pg=Pr,Mg=Wr,xg=1,Dg=2,jg=4,Je="[object Arguments]",Lg="[object Array]",Eg="[object Boolean]",Fg="[object Date]",Rg="[object Error]",ke="[object Function]",Bg="[object GeneratorFunction]",Ug="[object Map]",Ng="[object Number]",ra="[object Object]",Gg="[object RegExp]",Hg="[object Set]",qg="[object String]",Vg="[object Symbol]",Kg="[object WeakMap]",zg="[object ArrayBuffer]",Wg="[object DataView]",Xg="[object Float32Array]",Yg="[object Float64Array]",Qg="[object Int8Array]",Zg="[object Int16Array]",Jg="[object Int32Array]",kg="[object Uint8Array]",rp="[object Uint8ClampedArray]",tp="[object Uint16Array]",ep="[object Uint32Array]",P={};P[Je]=P[Lg]=P[zg]=P[Wg]=P[Eg]=P[Fg]=P[Xg]=P[Yg]=P[Qg]=P[Zg]=P[Jg]=P[Ug]=P[Ng]=P[ra]=P[Gg]=P[Hg]=P[qg]=P[Vg]=P[kg]=P[rp]=P[tp]=P[ep]=!0;P[Rg]=P[ke]=P[Kg]=!1;function Er(r,t,e,a,n,i){var o,s=t&xg,l=t&Dg,h=t&jg;if(e&&(o=n?e(r,a,n,i):e(r)),o!==void 0)return o;if(!Cg(r))return r;var b=wg(r);if(b){if(o=$g(r),!s)return pg(r,o)}else{var d=mg(r),f=d==ke||d==Bg;if(Ag(r))return gg(r,s);if(d==ra||d==Je||f&&!n){if(o=l||f?{}:Sg(r),!s)return l?yg(r,vg(o,r)):bg(r,hg(o,r))}else{if(!P[d])return n?r:{};o=Tg(r,d,s)}}i||(i=new fg);var g=i.get(r);if(g)return g;i.set(r,o),Ig(r)?r.forEach(function(v){o.add(Er(v,t,e,v,r,i))}):Og(r)&&r.forEach(function(v,y){o.set(y,Er(v,t,e,y,r,i))});var u=h?l?_g:dg:l?Mg:Pg,c=b?void 0:u(r);return cg(c||r,function(v,y){c&&(y=v,v=r[y]),lg(o,y,Er(v,t,e,y,r,i))}),o}var ap=Er,np=ap,ip=4;function op(r){return np(r,ip)}var sp=op,ve;function up(){if(ve)return Lr;ve=1;var r=D&&D.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Lr,"__esModule",{value:!0});var t=r(sa()),e=sp,a=function(){function n(i,o){o===void 0&&(o={}),this._src=i,this._opts=o,this._opts.filters=e(t.default.DefaultOpts.filters)}return n.prototype.maxColorCount=function(i){return this._opts.colorCount=i,this},n.prototype.maxDimension=function(i){return this._opts.maxDimension=i,this},n.prototype.addFilter=function(i){return this._opts.filters.push(i),this},n.prototype.removeFilter=function(i){var o=this._opts.filters.indexOf(i);return o>0&&this._opts.filters.splice(o),this},n.prototype.clearFilters=function(){return this._opts.filters=[],this},n.prototype.quality=function(i){return this._opts.quality=i,this},n.prototype.useImageClass=function(i){return this._opts.ImageClass=i,this},n.prototype.useGenerator=function(i){return this._opts.generator=i,this},n.prototype.useQuantizer=function(i){return this._opts.quantizer=i,this},n.prototype.build=function(){return new t.default(this._src,this._opts)},n.prototype.getPalette=function(i){return this.build().getPalette(i)},n.prototype.getSwatches=function(i){return this.build().getPalette(i)},n}();return Lr.default=a,Lr}var ta={},$t={},Tt={};Object.defineProperty(Tt,"__esModule",{value:!0});var G=Or,fp=function(){function r(t,e,a,n,i,o,s){this._volume=-1,this._count=-1,this.dimension={r1:t,r2:e,g1:a,g2:n,b1:i,b2:o},this.hist=s}return r.build=function(t,e){var a=1<<3*G.SIGBITS,n=new Uint32Array(a),i,o,s,l,h,b,d,f,g,u;i=s=h=0,o=l=b=Number.MAX_VALUE;for(var c=t.length/4,v=0;v<c;){var y=v*4;if(v++,d=t[y+0],f=t[y+1],g=t[y+2],u=t[y+3],u!==0){d=d>>G.RSHIFT,f=f>>G.RSHIFT,g=g>>G.RSHIFT;var p=G.getColorIndex(d,f,g);n[p]+=1,d>i&&(i=d),d<o&&(o=d),f>s&&(s=f),f<l&&(l=f),g>h&&(h=g),g<b&&(b=g)}}return new r(o,i,l,s,b,h,n)},r.prototype.invalidate=function(){this._volume=this._count=-1,this._avg=null},r.prototype.volume=function(){if(this._volume<0){var t=this.dimension,e=t.r1,a=t.r2,n=t.g1,i=t.g2,o=t.b1,s=t.b2;this._volume=(a-e+1)*(i-n+1)*(s-o+1)}return this._volume},r.prototype.count=function(){if(this._count<0){for(var t=this.hist,e=this.dimension,a=e.r1,n=e.r2,i=e.g1,o=e.g2,s=e.b1,l=e.b2,h=0,b=a;b<=n;b++)for(var d=i;d<=o;d++)for(var f=s;f<=l;f++){var g=G.getColorIndex(b,d,f);h+=t[g]}this._count=h}return this._count},r.prototype.clone=function(){var t=this.hist,e=this.dimension,a=e.r1,n=e.r2,i=e.g1,o=e.g2,s=e.b1,l=e.b2;return new r(a,n,i,o,s,l,t)},r.prototype.avg=function(){if(!this._avg){var t=this.hist,e=this.dimension,a=e.r1,n=e.r2,i=e.g1,o=e.g2,s=e.b1,l=e.b2,h=0,b=1<<8-G.SIGBITS,d=void 0,f=void 0,g=void 0;d=f=g=0;for(var u=a;u<=n;u++)for(var c=i;c<=o;c++)for(var v=s;v<=l;v++){var y=G.getColorIndex(u,c,v),p=t[y];h+=p,d+=p*(u+.5)*b,f+=p*(c+.5)*b,g+=p*(v+.5)*b}h?this._avg=[~~(d/h),~~(f/h),~~(g/h)]:this._avg=[~~(b*(a+n+1)/2),~~(b*(i+o+1)/2),~~(b*(s+l+1)/2)]}return this._avg},r.prototype.contains=function(t){var e=t[0],a=t[1],n=t[2],i=this.dimension,o=i.r1,s=i.r2,l=i.g1,h=i.g2,b=i.b1,d=i.b2;return e>>=G.RSHIFT,a>>=G.RSHIFT,n>>=G.RSHIFT,e>=o&&e<=s&&a>=l&&a<=h&&n>=b&&n<=d},r.prototype.split=function(){var t=this.hist,e=this.dimension,a=e.r1,n=e.r2,i=e.g1,o=e.g2,s=e.b1,l=e.b2,h=this.count();if(!h)return[];if(h===1)return[this.clone()];var b=n-a+1,d=o-i+1,f=l-s+1,g=Math.max(b,d,f),u=null,c,v;c=v=0;var y=null;if(g===b){y="r",u=new Uint32Array(n+1);for(var p=a;p<=n;p++){c=0;for(var _=i;_<=o;_++)for(var $=s;$<=l;$++){var T=G.getColorIndex(p,_,$);c+=t[T]}v+=c,u[p]=v}}else if(g===d){y="g",u=new Uint32Array(o+1);for(var _=i;_<=o;_++){c=0;for(var p=a;p<=n;p++)for(var $=s;$<=l;$++){var T=G.getColorIndex(p,_,$);c+=t[T]}v+=c,u[_]=v}}else{y="b",u=new Uint32Array(l+1);for(var $=s;$<=l;$++){c=0;for(var p=a;p<=n;p++)for(var _=i;_<=o;_++){var T=G.getColorIndex(p,_,$);c+=t[T]}v+=c,u[$]=v}}for(var w=-1,j=new Uint32Array(u.length),O=0;O<u.length;O++){var C=u[O];w<0&&C>v/2&&(w=O),j[O]=v-C}var E=this;function z(W){var q=W+"1",F=W+"2",B=E.dimension[q],I=E.dimension[F],X=E.clone(),cr=E.clone(),lr=w-B,m=I-w;for(lr<=m?(I=Math.min(I-1,~~(w+m/2)),I=Math.max(0,I)):(I=Math.max(B,~~(w-1-lr/2)),I=Math.min(E.dimension[F],I));!u[I];)I++;for(var S=j[I];!S&&u[I-1];)S=j[--I];return X.dimension[F]=I,cr.dimension[q]=I+1,[X,cr]}return z(y)},r}();Tt.default=fp;var St={};Object.defineProperty(St,"__esModule",{value:!0});var cp=function(){function r(t){this._comparator=t,this.contents=[],this._sorted=!1}return r.prototype._sort=function(){this._sorted||(this.contents.sort(this._comparator),this._sorted=!0)},r.prototype.push=function(t){this.contents.push(t),this._sorted=!1},r.prototype.peek=function(t){return this._sort(),t=typeof t=="number"?t:this.contents.length-1,this.contents[t]},r.prototype.pop=function(){return this._sort(),this.contents.pop()},r.prototype.size=function(){return this.contents.length},r.prototype.map=function(t){return this._sort(),this.contents.map(t)},r}();St.default=cp;var ea=D&&D.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty($t,"__esModule",{value:!0});var lp=br,hp=ea(Tt),ge=ea(St),vp=.75;function pe(r,t){for(var e=r.size();r.size()<t;){var a=r.pop();if(a&&a.count()>0){var n=a.split(),i=n[0],o=n[1];if(r.push(i),o&&o.count()>0&&r.push(o),r.size()===e)break;e=r.size()}else break}}var gp=function(r,t){if(r.length===0||t.colorCount<2||t.colorCount>256)throw new Error("Wrong MMCQ parameters");var e=hp.default.build(r),a=e.hist;Object.keys(a).length;var n=new ge.default(function(o,s){return o.count()-s.count()});n.push(e),pe(n,vp*t.colorCount);var i=new ge.default(function(o,s){return o.count()*o.volume()-s.count()*s.volume()});return i.contents=n.contents,pe(i,t.colorCount-i.size()),pp(i)};function pp(r){for(var t=[];r.size();){var e=r.pop(),a=e.avg();a[0],a[1],a[2],t.push(new lp.Swatch(a,e.count()))}return t}$t.default=gp;(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.WebWorker=void 0;var t=$t;Object.defineProperty(r,"MMCQ",{enumerable:!0,get:function(){return t.default}}),r.WebWorker=null})(ta);var aa={},wt={};function bp(r,t,e){switch(e.length){case 0:return r.call(t);case 1:return r.call(t,e[0]);case 2:return r.call(t,e[0],e[1]);case 3:return r.call(t,e[0],e[1],e[2])}return r.apply(t,e)}var yp=bp,dp=yp,be=Math.max;function _p(r,t,e){return t=be(t===void 0?r.length-1:t,0),function(){for(var a=arguments,n=-1,i=be(a.length-t,0),o=Array(i);++n<i;)o[n]=a[t+n];n=-1;for(var s=Array(t+1);++n<t;)s[n]=a[n];return s[t]=e(o),dp(r,this,s)}}var mp=_p;function $p(r){return function(){return r}}var Tp=$p,Sp=Tp,ye=We,wp=_t,Ap=ye?function(r,t){return ye(r,"toString",{configurable:!0,enumerable:!1,value:Sp(t),writable:!0})}:wp,Op=Ap,Cp=800,Ip=16,Pp=Date.now;function Mp(r){var t=0,e=0;return function(){var a=Pp(),n=Ip-(a-e);if(e=a,n>0){if(++t>=Cp)return arguments[0]}else t=0;return r.apply(void 0,arguments)}}var xp=Mp,Dp=Op,jp=xp,Lp=jp(Dp),Ep=Lp,Fp=_t,Rp=mp,Bp=Ep;function Up(r,t){return Bp(Rp(r,t,Fp),r+"")}var Np=Up,Gp=Mr,Hp=Ur,qp=ut,Vp=ur;function Kp(r,t,e){if(!Vp(e))return!1;var a=typeof t;return(a=="number"?Hp(e)&&qp(t,e.length):a=="string"&&t in e)?Gp(e[t],r):!1}var zp=Kp,Wp=Np,Xp=Mr,Yp=zp,Qp=Wr,na=Object.prototype,Zp=na.hasOwnProperty,Jp=Wp(function(r,t){r=Object(r);var e=-1,a=t.length,n=a>2?t[2]:void 0;for(n&&Yp(t[0],t[1],n)&&(a=1);++e<a;)for(var i=t[e],o=Qp(i),s=-1,l=o.length;++s<l;){var h=o[s],b=r[h];(b===void 0||Xp(b,na[h])&&!Zp.call(r,h))&&(r[h]=i[h])}return r}),ia=Jp;Object.defineProperty(wt,"__esModule",{value:!0});var er=br,ar=Or,kp=ia,rb={targetDarkLuma:.26,maxDarkLuma:.45,minLightLuma:.55,targetLightLuma:.74,minNormalLuma:.3,targetNormalLuma:.5,maxNormalLuma:.7,targetMutesSaturation:.3,maxMutesSaturation:.4,targetVibrantSaturation:1,minVibrantSaturation:.35,weightSaturation:3,weightLuma:6.5,weightPopulation:.5};function tb(r){var t=0;return r.forEach(function(e){t=Math.max(t,e.getPopulation())}),t}function eb(r,t){return r.Vibrant===t||r.DarkVibrant===t||r.LightVibrant===t||r.Muted===t||r.DarkMuted===t||r.LightMuted===t}function ab(r,t,e,a,n,i,o){function s(){for(var h=[],b=0;b<arguments.length;b++)h[b]=arguments[b];for(var d=0,f=0,g=0;g<h.length;g+=2){var u=h[g],c=h[g+1];d+=u*c,f+=c}return d/f}function l(h,b){return 1-Math.abs(h-b)}return s(l(r,t),o.weightSaturation,l(e,a),o.weightLuma,n/i,o.weightPopulation)}function hr(r,t,e,a,n,i,o,s,l,h){var b=null,d=0;return t.forEach(function(f){var g=f.getHsl(),u=g[1],c=g[2];if(u>=s&&u<=l&&c>=n&&c<=i&&!eb(r,f)){var v=ab(u,o,c,a,f.getPopulation(),e,h);(b===null||v>d)&&(b=f,d=v)}}),b}function nb(r,t,e){var a={};return a.Vibrant=hr(a,r,t,e.targetNormalLuma,e.minNormalLuma,e.maxNormalLuma,e.targetVibrantSaturation,e.minVibrantSaturation,1,e),a.LightVibrant=hr(a,r,t,e.targetLightLuma,e.minLightLuma,1,e.targetVibrantSaturation,e.minVibrantSaturation,1,e),a.DarkVibrant=hr(a,r,t,e.targetDarkLuma,0,e.maxDarkLuma,e.targetVibrantSaturation,e.minVibrantSaturation,1,e),a.Muted=hr(a,r,t,e.targetNormalLuma,e.minNormalLuma,e.maxNormalLuma,e.targetMutesSaturation,0,e.maxMutesSaturation,e),a.LightMuted=hr(a,r,t,e.targetLightLuma,e.minLightLuma,1,e.targetMutesSaturation,0,e.maxMutesSaturation,e),a.DarkMuted=hr(a,r,t,e.targetDarkLuma,0,e.maxDarkLuma,e.targetMutesSaturation,0,e.maxMutesSaturation,e),a}function ib(r,t,e){if(r.Vibrant===null&&r.DarkVibrant===null&&r.LightVibrant===null){if(r.DarkVibrant===null&&r.DarkMuted!==null){var a=r.DarkMuted.getHsl(),n=a[0],i=a[1],o=a[2];o=e.targetDarkLuma,r.DarkVibrant=new er.Swatch(ar.hslToRgb(n,i,o),0)}if(r.LightVibrant===null&&r.LightMuted!==null){var s=r.LightMuted.getHsl(),n=s[0],i=s[1],o=s[2];o=e.targetDarkLuma,r.DarkVibrant=new er.Swatch(ar.hslToRgb(n,i,o),0)}}if(r.Vibrant===null&&r.DarkVibrant!==null){var l=r.DarkVibrant.getHsl(),n=l[0],i=l[1],o=l[2];o=e.targetNormalLuma,r.Vibrant=new er.Swatch(ar.hslToRgb(n,i,o),0)}else if(r.Vibrant===null&&r.LightVibrant!==null){var h=r.LightVibrant.getHsl(),n=h[0],i=h[1],o=h[2];o=e.targetNormalLuma,r.Vibrant=new er.Swatch(ar.hslToRgb(n,i,o),0)}if(r.DarkVibrant===null&&r.Vibrant!==null){var b=r.Vibrant.getHsl(),n=b[0],i=b[1],o=b[2];o=e.targetDarkLuma,r.DarkVibrant=new er.Swatch(ar.hslToRgb(n,i,o),0)}if(r.LightVibrant===null&&r.Vibrant!==null){var d=r.Vibrant.getHsl(),n=d[0],i=d[1],o=d[2];o=e.targetLightLuma,r.LightVibrant=new er.Swatch(ar.hslToRgb(n,i,o),0)}if(r.Muted===null&&r.Vibrant!==null){var f=r.Vibrant.getHsl(),n=f[0],i=f[1],o=f[2];o=e.targetMutesSaturation,r.Muted=new er.Swatch(ar.hslToRgb(n,i,o),0)}if(r.DarkMuted===null&&r.DarkVibrant!==null){var g=r.DarkVibrant.getHsl(),n=g[0],i=g[1],o=g[2];o=e.targetMutesSaturation,r.DarkMuted=new er.Swatch(ar.hslToRgb(n,i,o),0)}if(r.LightMuted===null&&r.LightVibrant!==null){var u=r.LightVibrant.getHsl(),n=u[0],i=u[1],o=u[2];o=e.targetMutesSaturation,r.LightMuted=new er.Swatch(ar.hslToRgb(n,i,o),0)}}var ob=function(r,t){t=kp({},t,rb);var e=tb(r),a=nb(r,e,t);return ib(a,e,t),a};wt.default=ob;(function(r){Object.defineProperty(r,"__esModule",{value:!0});var t=wt;Object.defineProperty(r,"Default",{enumerable:!0,get:function(){return t.default}})})(aa);var oa={},At={};Object.defineProperty(At,"__esModule",{value:!0});function sb(r,t,e,a){return a>=125&&!(r>250&&t>250&&e>250)}At.default=sb;(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.combineFilters=void 0;var t=At;Object.defineProperty(r,"Default",{enumerable:!0,get:function(){return t.default}});function e(a){return!Array.isArray(a)||a.length===0?null:function(n,i,o,s){if(s===0)return!1;for(var l=0;l<a.length;l++)if(!a[l](n,i,o,s))return!1;return!0}}r.combineFilters=e})(oa);var de;function sa(){if(de)return Dr;de=1;var r=D&&D.__createBinding||(Object.create?function(f,g,u,c){c===void 0&&(c=u),Object.defineProperty(f,c,{enumerable:!0,get:function(){return g[u]}})}:function(f,g,u,c){c===void 0&&(c=u),f[c]=g[u]}),t=D&&D.__setModuleDefault||(Object.create?function(f,g){Object.defineProperty(f,"default",{enumerable:!0,value:g})}:function(f,g){f.default=g}),e=D&&D.__importStar||function(f){if(f&&f.__esModule)return f;var g={};if(f!=null)for(var u in f)u!=="default"&&Object.hasOwnProperty.call(f,u)&&r(g,f,u);return t(g,f),g},a=D&&D.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(Dr,"__esModule",{value:!0});var n=br,i=a(up()),o=e(Or),s=e(ta),l=e(aa),h=e(oa),b=ia,d=function(){function f(g,u){this._src=g,this.opts=b({},u,f.DefaultOpts),this.opts.combinedFilter=h.combineFilters(this.opts.filters)}return f.from=function(g){return new i.default(g)},f.prototype._process=function(g,u){var c=u.quantizer,v=u.generator;return g.scaleDown(u),g.applyFilter(u.combinedFilter).then(function(y){return c(y.data,u)}).then(function(y){return n.Swatch.applyFilter(y,u.combinedFilter)}).then(function(y){return Promise.resolve(v(y))})},f.prototype.palette=function(){return this.swatches()},f.prototype.swatches=function(){return this._palette},f.prototype.getPalette=function(g){var u=this,c=new this.opts.ImageClass,v=c.load(this._src).then(function(y){return u._process(y,u.opts)}).then(function(y){return u._palette=y,c.remove(),y},function(y){throw c.remove(),y});return g&&v.then(function(y){return g(null,y)},function(y){return g(y)}),v},f.Builder=i.default,f.Quantizer=s,f.Generator=l,f.Filter=h,f.Util=o,f.Swatch=n.Swatch,f.DefaultOpts={colorCount:64,quality:5,generator:l.Default,ImageClass:null,quantizer:s.MMCQ,filters:[h.Default]},f}();return Dr.default=d,Dr}var Ot={},Xr={};Object.defineProperty(Xr,"__esModule",{value:!0});Xr.ImageBase=void 0;var ub=function(){function r(){}return r.prototype.scaleDown=function(t){var e=this.getWidth(),a=this.getHeight(),n=1;if(t.maxDimension>0){var i=Math.max(e,a);i>t.maxDimension&&(n=t.maxDimension/i)}else n=1/t.quality;n<1&&this.resize(e*n,a*n,n)},r.prototype.applyFilter=function(t){var e=this.getImageData();if(typeof t=="function")for(var a=e.data,n=a.length/4,i=void 0,o=void 0,s=void 0,l=void 0,h=void 0,b=0;b<n;b++)i=b*4,o=a[i+0],s=a[i+1],l=a[i+2],h=a[i+3],t(o,s,l,h)||(a[i+3]=0);return Promise.resolve(e)},r}();Xr.ImageBase=ub;var Tr={},Br={},fb={get exports(){return Br},set exports(r){Br=r}};/*! https://mths.be/punycode v1.3.2 by @mathias */(function(r,t){(function(e){var a=t&&!t.nodeType&&t,n=r&&!r.nodeType&&r,i=typeof window=="object"&&window;(i.global===i||i.window===i||i.self===i)&&(e=i);var o,s=2147483647,l=36,h=1,b=26,d=38,f=700,g=72,u=128,c="-",v=/^xn--/,y=/[^\x20-\x7E]/,p=/[\x2E\u3002\uFF0E\uFF61]/g,_={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},$=l-h,T=Math.floor,w=String.fromCharCode,j;function O(m){throw RangeError(_[m])}function C(m,S){for(var A=m.length,x=[];A--;)x[A]=S(m[A]);return x}function E(m,S){var A=m.split("@"),x="";A.length>1&&(x=A[0]+"@",m=A[1]),m=m.replace(p,".");var L=m.split("."),N=C(L,S).join(".");return x+N}function z(m){for(var S=[],A=0,x=m.length,L,N;A<x;)L=m.charCodeAt(A++),L>=55296&&L<=56319&&A<x?(N=m.charCodeAt(A++),(N&64512)==56320?S.push(((L&1023)<<10)+(N&1023)+65536):(S.push(L),A--)):S.push(L);return S}function W(m){return C(m,function(S){var A="";return S>65535&&(S-=65536,A+=w(S>>>10&1023|55296),S=56320|S&1023),A+=w(S),A}).join("")}function q(m){return m-48<10?m-22:m-65<26?m-65:m-97<26?m-97:l}function F(m,S){return m+22+75*(m<26)-((S!=0)<<5)}function B(m,S,A){var x=0;for(m=A?T(m/f):m>>1,m+=T(m/S);m>$*b>>1;x+=l)m=T(m/$);return T(x+($+1)*m/(m+d))}function I(m){var S=[],A=m.length,x,L=0,N=u,R=g,H,Y,Z,tr,U,V,Q,nr,ir;for(H=m.lastIndexOf(c),H<0&&(H=0),Y=0;Y<H;++Y)m.charCodeAt(Y)>=128&&O("not-basic"),S.push(m.charCodeAt(Y));for(Z=H>0?H+1:0;Z<A;){for(tr=L,U=1,V=l;Z>=A&&O("invalid-input"),Q=q(m.charCodeAt(Z++)),(Q>=l||Q>T((s-L)/U))&&O("overflow"),L+=Q*U,nr=V<=R?h:V>=R+b?b:V-R,!(Q<nr);V+=l)ir=l-nr,U>T(s/ir)&&O("overflow"),U*=ir;x=S.length+1,R=B(L-tr,x,tr==0),T(L/x)>s-N&&O("overflow"),N+=T(L/x),L%=x,S.splice(L++,0,N)}return W(S)}function X(m){var S,A,x,L,N,R,H,Y,Z,tr,U,V=[],Q,nr,ir,Yr;for(m=z(m),Q=m.length,S=u,A=0,N=g,R=0;R<Q;++R)U=m[R],U<128&&V.push(w(U));for(x=L=V.length,L&&V.push(c);x<Q;){for(H=s,R=0;R<Q;++R)U=m[R],U>=S&&U<H&&(H=U);for(nr=x+1,H-S>T((s-A)/nr)&&O("overflow"),A+=(H-S)*nr,S=H,R=0;R<Q;++R)if(U=m[R],U<S&&++A>s&&O("overflow"),U==S){for(Y=A,Z=l;tr=Z<=N?h:Z>=N+b?b:Z-N,!(Y<tr);Z+=l)Yr=Y-tr,ir=l-tr,V.push(w(F(tr+Yr%ir,0))),Y=T(Yr/ir);V.push(w(F(Y,0))),N=B(A,nr,x==L),A=0,++x}++A,++S}return V.join("")}function cr(m){return E(m,function(S){return v.test(S)?I(S.slice(4).toLowerCase()):S})}function lr(m){return E(m,function(S){return y.test(S)?"xn--"+X(S):S})}if(o={version:"1.3.2",ucs2:{decode:z,encode:W},decode:I,encode:X,toASCII:lr,toUnicode:cr},a&&n)if(r.exports==a)n.exports=o;else for(j in o)o.hasOwnProperty(j)&&(a[j]=o[j]);else e.punycode=o})(D)})(fb,Br);var cb={isString:function(r){return typeof r=="string"},isObject:function(r){return typeof r=="object"&&r!==null},isNull:function(r){return r===null},isNullOrUndefined:function(r){return r==null}},Ar={};function lb(r,t){return Object.prototype.hasOwnProperty.call(r,t)}var hb=function(r,t,e,a){t=t||"&",e=e||"=";var n={};if(typeof r!="string"||r.length===0)return n;var i=/\+/g;r=r.split(t);var o=1e3;a&&typeof a.maxKeys=="number"&&(o=a.maxKeys);var s=r.length;o>0&&s>o&&(s=o);for(var l=0;l<s;++l){var h=r[l].replace(i,"%20"),b=h.indexOf(e),d,f,g,u;b>=0?(d=h.substr(0,b),f=h.substr(b+1)):(d=h,f=""),g=decodeURIComponent(d),u=decodeURIComponent(f),lb(n,g)?Array.isArray(n[g])?n[g].push(u):n[g]=[n[g],u]:n[g]=u}return n},wr=function(r){switch(typeof r){case"string":return r;case"boolean":return r?"true":"false";case"number":return isFinite(r)?r:"";default:return""}},vb=function(r,t,e,a){return t=t||"&",e=e||"=",r===null&&(r=void 0),typeof r=="object"?Object.keys(r).map(function(n){var i=encodeURIComponent(wr(n))+e;return Array.isArray(r[n])?r[n].map(function(o){return i+encodeURIComponent(wr(o))}).join(t):i+encodeURIComponent(wr(r[n]))}).join(t):a?encodeURIComponent(wr(a))+e+encodeURIComponent(wr(r)):""};Ar.decode=Ar.parse=hb;Ar.encode=Ar.stringify=vb;var gb=Br,J=cb;Tr.parse=xr;Tr.resolve=wb;Tr.resolveObject=Ab;Tr.format=Sb;Tr.Url=K;function K(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var pb=/^([a-z0-9.+-]+:)/i,bb=/:[0-9]*$/,yb=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,db=["<",">",'"',"`"," ","\r",`
`,"	"],_b=["{","}","|","\\","^","`"].concat(db),nt=["'"].concat(_b),_e=["%","/","?",";","#"].concat(nt),me=["/","?","#"],mb=255,$e=/^[+a-z0-9A-Z_-]{0,63}$/,$b=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,Tb={javascript:!0,"javascript:":!0},it={javascript:!0,"javascript:":!0},vr={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},ot=Ar;function xr(r,t,e){if(r&&J.isObject(r)&&r instanceof K)return r;var a=new K;return a.parse(r,t,e),a}K.prototype.parse=function(r,t,e){if(!J.isString(r))throw new TypeError("Parameter 'url' must be a string, not "+typeof r);var a=r.indexOf("?"),n=a!==-1&&a<r.indexOf("#")?"?":"#",i=r.split(n),o=/\\/g;i[0]=i[0].replace(o,"/"),r=i.join(n);var s=r;if(s=s.trim(),!e&&r.split("#").length===1){var l=yb.exec(s);if(l)return this.path=s,this.href=s,this.pathname=l[1],l[2]?(this.search=l[2],t?this.query=ot.parse(this.search.substr(1)):this.query=this.search.substr(1)):t&&(this.search="",this.query={}),this}var h=pb.exec(s);if(h){h=h[0];var b=h.toLowerCase();this.protocol=b,s=s.substr(h.length)}if(e||h||s.match(/^\/\/[^@\/]+@[^@\/]+/)){var d=s.substr(0,2)==="//";d&&!(h&&it[h])&&(s=s.substr(2),this.slashes=!0)}if(!it[h]&&(d||h&&!vr[h])){for(var f=-1,g=0;g<me.length;g++){var u=s.indexOf(me[g]);u!==-1&&(f===-1||u<f)&&(f=u)}var c,v;f===-1?v=s.lastIndexOf("@"):v=s.lastIndexOf("@",f),v!==-1&&(c=s.slice(0,v),s=s.slice(v+1),this.auth=decodeURIComponent(c)),f=-1;for(var g=0;g<_e.length;g++){var u=s.indexOf(_e[g]);u!==-1&&(f===-1||u<f)&&(f=u)}f===-1&&(f=s.length),this.host=s.slice(0,f),s=s.slice(f),this.parseHost(),this.hostname=this.hostname||"";var y=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!y)for(var p=this.hostname.split(/\./),g=0,_=p.length;g<_;g++){var $=p[g];if($&&!$.match($e)){for(var T="",w=0,j=$.length;w<j;w++)$.charCodeAt(w)>127?T+="x":T+=$[w];if(!T.match($e)){var O=p.slice(0,g),C=p.slice(g+1),E=$.match($b);E&&(O.push(E[1]),C.unshift(E[2])),C.length&&(s="/"+C.join(".")+s),this.hostname=O.join(".");break}}}this.hostname.length>mb?this.hostname="":this.hostname=this.hostname.toLowerCase(),y||(this.hostname=gb.toASCII(this.hostname));var z=this.port?":"+this.port:"",W=this.hostname||"";this.host=W+z,this.href+=this.host,y&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),s[0]!=="/"&&(s="/"+s))}if(!Tb[b])for(var g=0,_=nt.length;g<_;g++){var q=nt[g];if(s.indexOf(q)!==-1){var F=encodeURIComponent(q);F===q&&(F=escape(q)),s=s.split(q).join(F)}}var B=s.indexOf("#");B!==-1&&(this.hash=s.substr(B),s=s.slice(0,B));var I=s.indexOf("?");if(I!==-1?(this.search=s.substr(I),this.query=s.substr(I+1),t&&(this.query=ot.parse(this.query)),s=s.slice(0,I)):t&&(this.search="",this.query={}),s&&(this.pathname=s),vr[b]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var z=this.pathname||"",X=this.search||"";this.path=z+X}return this.href=this.format(),this};function Sb(r){return J.isString(r)&&(r=xr(r)),r instanceof K?r.format():K.prototype.format.call(r)}K.prototype.format=function(){var r=this.auth||"";r&&(r=encodeURIComponent(r),r=r.replace(/%3A/i,":"),r+="@");var t=this.protocol||"",e=this.pathname||"",a=this.hash||"",n=!1,i="";this.host?n=r+this.host:this.hostname&&(n=r+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(n+=":"+this.port)),this.query&&J.isObject(this.query)&&Object.keys(this.query).length&&(i=ot.stringify(this.query));var o=this.search||i&&"?"+i||"";return t&&t.substr(-1)!==":"&&(t+=":"),this.slashes||(!t||vr[t])&&n!==!1?(n="//"+(n||""),e&&e.charAt(0)!=="/"&&(e="/"+e)):n||(n=""),a&&a.charAt(0)!=="#"&&(a="#"+a),o&&o.charAt(0)!=="?"&&(o="?"+o),e=e.replace(/[?#]/g,function(s){return encodeURIComponent(s)}),o=o.replace("#","%23"),t+n+e+o+a};function wb(r,t){return xr(r,!1,!0).resolve(t)}K.prototype.resolve=function(r){return this.resolveObject(xr(r,!1,!0)).format()};function Ab(r,t){return r?xr(r,!1,!0).resolveObject(t):t}K.prototype.resolveObject=function(r){if(J.isString(r)){var t=new K;t.parse(r,!1,!0),r=t}for(var e=new K,a=Object.keys(this),n=0;n<a.length;n++){var i=a[n];e[i]=this[i]}if(e.hash=r.hash,r.href==="")return e.href=e.format(),e;if(r.slashes&&!r.protocol){for(var o=Object.keys(r),s=0;s<o.length;s++){var l=o[s];l!=="protocol"&&(e[l]=r[l])}return vr[e.protocol]&&e.hostname&&!e.pathname&&(e.path=e.pathname="/"),e.href=e.format(),e}if(r.protocol&&r.protocol!==e.protocol){if(!vr[r.protocol]){for(var h=Object.keys(r),b=0;b<h.length;b++){var d=h[b];e[d]=r[d]}return e.href=e.format(),e}if(e.protocol=r.protocol,!r.host&&!it[r.protocol]){for(var _=(r.pathname||"").split("/");_.length&&!(r.host=_.shift()););r.host||(r.host=""),r.hostname||(r.hostname=""),_[0]!==""&&_.unshift(""),_.length<2&&_.unshift(""),e.pathname=_.join("/")}else e.pathname=r.pathname;if(e.search=r.search,e.query=r.query,e.host=r.host||"",e.auth=r.auth,e.hostname=r.hostname||r.host,e.port=r.port,e.pathname||e.search){var f=e.pathname||"",g=e.search||"";e.path=f+g}return e.slashes=e.slashes||r.slashes,e.href=e.format(),e}var u=e.pathname&&e.pathname.charAt(0)==="/",c=r.host||r.pathname&&r.pathname.charAt(0)==="/",v=c||u||e.host&&r.pathname,y=v,p=e.pathname&&e.pathname.split("/")||[],_=r.pathname&&r.pathname.split("/")||[],$=e.protocol&&!vr[e.protocol];if($&&(e.hostname="",e.port=null,e.host&&(p[0]===""?p[0]=e.host:p.unshift(e.host)),e.host="",r.protocol&&(r.hostname=null,r.port=null,r.host&&(_[0]===""?_[0]=r.host:_.unshift(r.host)),r.host=null),v=v&&(_[0]===""||p[0]==="")),c)e.host=r.host||r.host===""?r.host:e.host,e.hostname=r.hostname||r.hostname===""?r.hostname:e.hostname,e.search=r.search,e.query=r.query,p=_;else if(_.length)p||(p=[]),p.pop(),p=p.concat(_),e.search=r.search,e.query=r.query;else if(!J.isNullOrUndefined(r.search)){if($){e.hostname=e.host=p.shift();var T=e.host&&e.host.indexOf("@")>0?e.host.split("@"):!1;T&&(e.auth=T.shift(),e.host=e.hostname=T.shift())}return e.search=r.search,e.query=r.query,(!J.isNull(e.pathname)||!J.isNull(e.search))&&(e.path=(e.pathname?e.pathname:"")+(e.search?e.search:"")),e.href=e.format(),e}if(!p.length)return e.pathname=null,e.search?e.path="/"+e.search:e.path=null,e.href=e.format(),e;for(var w=p.slice(-1)[0],j=(e.host||r.host||p.length>1)&&(w==="."||w==="..")||w==="",O=0,C=p.length;C>=0;C--)w=p[C],w==="."?p.splice(C,1):w===".."?(p.splice(C,1),O++):O&&(p.splice(C,1),O--);if(!v&&!y)for(;O--;O)p.unshift("..");v&&p[0]!==""&&(!p[0]||p[0].charAt(0)!=="/")&&p.unshift(""),j&&p.join("/").substr(-1)!=="/"&&p.push("");var E=p[0]===""||p[0]&&p[0].charAt(0)==="/";if($){e.hostname=e.host=E?"":p.length?p.shift():"";var T=e.host&&e.host.indexOf("@")>0?e.host.split("@"):!1;T&&(e.auth=T.shift(),e.host=e.hostname=T.shift())}return v=v||e.host&&p.length,v&&!E&&p.unshift(""),p.length?e.pathname=p.join("/"):(e.pathname=null,e.path=null),(!J.isNull(e.pathname)||!J.isNull(e.search))&&(e.path=(e.pathname?e.pathname:"")+(e.search?e.search:"")),e.auth=r.auth||e.auth,e.slashes=e.slashes||r.slashes,e.href=e.format(),e};K.prototype.parseHost=function(){var r=this.host,t=bb.exec(r);t&&(t=t[0],t!==":"&&(this.port=t.substr(1)),r=r.substr(0,r.length-t.length)),r&&(this.hostname=r)};var Ob=D&&D.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,n){a.__proto__=n}||function(a,n){for(var i in n)n.hasOwnProperty(i)&&(a[i]=n[i])},r(t,e)};return function(t,e){r(t,e);function a(){this.constructor=t}t.prototype=e===null?Object.create(e):(a.prototype=e.prototype,new a)}}(),Cb=D&&D.__createBinding||(Object.create?function(r,t,e,a){a===void 0&&(a=e),Object.defineProperty(r,a,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,a){a===void 0&&(a=e),r[a]=t[e]}),Ib=D&&D.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),Pb=D&&D.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)e!=="default"&&Object.hasOwnProperty.call(r,e)&&Cb(t,r,e);return Ib(t,r),t};Object.defineProperty(Ot,"__esModule",{value:!0});var Mb=Xr,st=Pb(Tr);function xb(r){var t=st.parse(r);return t.protocol===null&&t.host===null&&t.port===null}function Db(r,t){var e=st.parse(r),a=st.parse(t);return e.protocol===a.protocol&&e.hostname===a.hostname&&e.port===a.port}var jb=function(r){Ob(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype._initCanvas=function(){var e=this.image,a=this._canvas=document.createElement("canvas"),n=this._context=a.getContext("2d");a.className="vibrant-canvas",a.style.display="none",this._width=a.width=e.width,this._height=a.height=e.height,n.drawImage(e,0,0),document.body.appendChild(a)},t.prototype.load=function(e){var a=this,n=null,i=null;if(typeof e=="string")n=document.createElement("img"),!xb(e)&&!Db(window.location.href,e)&&(n.crossOrigin="anonymous"),i=n.src=e;else if(e instanceof HTMLImageElement)n=e,i=e.src;else return Promise.reject(new Error("Cannot load buffer as an image in browser"));return this.image=n,new Promise(function(o,s){var l=function(){a._initCanvas(),o(a)};n.complete?l():(n.onload=l,n.onerror=function(h){return s(new Error("Fail to load image: "+i))})})},t.prototype.clear=function(){this._context.clearRect(0,0,this._width,this._height)},t.prototype.update=function(e){this._context.putImageData(e,0,0)},t.prototype.getWidth=function(){return this._width},t.prototype.getHeight=function(){return this._height},t.prototype.resize=function(e,a,n){var i=this,o=i._canvas,s=i._context,l=i.image;this._width=o.width=e,this._height=o.height=a,s.scale(n,n),s.drawImage(l,0,0)},t.prototype.getPixelCount=function(){return this._width*this._height},t.prototype.getImageData=function(){return this._context.getImageData(0,0,this._width,this._height)},t.prototype.remove=function(){this._canvas&&this._canvas.parentNode&&this._canvas.parentNode.removeChild(this._canvas)},t}(Mb.ImageBase);Ot.default=jb;var ua=D&&D.__importDefault||function(r){return r&&r.__esModule?r:{default:r}},fa=ua(sa()),Lb=ua(Ot);fa.default.DefaultOpts.ImageClass=Lb.default;var Eb=fa.default;function Rb(r){if(!r)return!1;var t,e,a,n;if(r.match(/^rgb/)){let i=r.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/);t=i[1],e=i[2],a=i[3]}else{let i=+("0x"+r.slice(1).replace(r.length<5&&/./g,"$&$&"));t=i>>16,e=i>>8&255,a=i&255}return n=Math.sqrt(.299*(t*t)+.587*(e*e)+.114*(a*a)),n<127.5}async function Bb(r){var a,n,i;const e=await new Eb(r,{useWorker:!0,quality:4}).getPalette();return{dominant:(a=e==null?void 0:e.Vibrant)==null?void 0:a.hex,average:(n=e==null?void 0:e.DarkVibrant)==null?void 0:n.hex,muted:(i=e==null?void 0:e.DarkMuted)==null?void 0:i.hex}}export{Bb as g,Rb as i};
