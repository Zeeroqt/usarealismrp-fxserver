import{r as S,a as i,j as e,F as b}from"./jsx-runtime-f40812bf.js";import{b as f,f as k,aJ as T,L as n,ag as K,y as M,C as I,a8 as $,c as p,d as D,k as y,aK as H,aL as W,aM as V,aq as j,h as R,aN as x,aO as F,aP as U,aQ as Z}from"./Phone-bbdfbfe1.js";import{S as E}from"./Switch-51deb5c4.js";import"./number-28525126.js";function _(){const t=f(p.Settings),[h,a]=S.useState({hour:0,minute:0}),[c,C]=S.useState(!1),r=f(T.Alarms),[m,A]=S.useState(null),v=o=>{let d=o.hour,l=o.minute;D("info",`Formatting time: ${d}:${l}`),t.time.twelveHourClock&&(d>12?d=d-12:d===0&&(d=12));let s,u;return d<10?s=`0${d}`:s=`${d}`,l<10?u=`0${l}`:u=`${l}`,t.time.twelveHourClock?`${s}:${u} ${o.hour>12?"PM":"AM"}`:`${s}:${u}`};return i("div",{className:"alarm-container",children:[m&&e(q,{cancel:()=>A(null),preTimer:{setPreTimer:a,preTimer:h},addAlarm:o=>{k("Clock",{action:"createAlarm",label:o.label,minutes:o.minutes,hours:o.hours}).then(d=>{d&&(T.Alarms.set([...r,{...o,id:d.id}]),A(null),a({hour:0,minute:0}))})}}),i("div",{className:"alarm-header",children:[i("div",{className:"alarm-header-top",children:[e("div",{className:"edit",onClick:()=>C(!c),children:c?n("APPS.CLOCK.ALARM.DONE"):n("APPS.CLOCK.ALARM.EDIT")}),e(K,{onClick:()=>{A(!0)}})]}),e("div",{className:"alarm-title",children:n("APPS.CLOCK.ALARM.TITLE")})]}),e("div",{className:"alarm-content",children:r.map((o,d)=>{let l=o.enabled?c?"":" active":"";return e("div",{className:`alarm${l}`,children:c?i(b,{children:[i("div",{className:"alarm-wrapper",children:[e(M,{onClick:()=>{I.PopUp.set({title:n("APPS.CLOCK.ALARM.DELETE_TITLE"),description:n("APPS.CLOCK.ALARM.DELETE_TEXT"),buttons:[{title:n("APPS.CLOCK.ALARM.BUTTON_CANCEL")},{title:n("APPS.CLOCK.ALARM.BUTTON_DELETE"),color:"red",cb:()=>{k("Clock",{action:"deleteAlarm",id:o.id}).then(()=>{T.Alarms.set(r.filter(s=>s.id!==o.id))})}}]})}}),i("div",{className:"alarm-info",children:[e("div",{className:"time",children:v({hour:o.hours,minute:o.minutes})}),e("div",{className:"label",children:o.label??n("APPS.CLOCK.ALARM.TITLE")})]})]}),e($,{})]}):i(b,{children:[i("div",{className:"alarm-info",children:[e("div",{className:"time",children:v({hour:o.hours,minute:o.minutes})}),e("div",{className:"label",children:o.label??n("APPS.CLOCK.ALARM.TITLE")})]}),e(E,{onChange:()=>{k("Clock",{action:"toggleAlarm",id:o.id,enabled:!o.enabled}).then(s=>{T.Alarms.set(r.map((u,L)=>(L===d&&(u.enabled=!u.enabled),u)))})},checked:o.enabled,theme:"dark"})]})},d)})})]})}function q(t){const[h,a]=S.useState("");let c=t.preTimer;const C=()=>{t.addAlarm({id:null,hours:c.preTimer.hour,minutes:c.preTimer.minute,label:h&&h.length>0?h:null,enabled:!0})};return i("div",{className:"new-alarm",children:[i("div",{className:"new-alarm-header",children:[e("div",{className:"cancel",onClick:()=>{t.cancel()},children:n("APPS.CLOCK.ALARM.CANCEL")}),e("div",{className:"title",children:n("APPS.CLOCK.ALARM.ADD")}),e("div",{className:"save",onClick:()=>C(),children:n("APPS.CLOCK.ALARM.SAVE")})]}),i("div",{className:"new-alarm-content",children:[i("div",{className:"picker darker",children:[e("div",{children:i("ul",{onScroll:r=>{let m=Math.floor(r.target.scrollTop/(r.target.scrollHeight/28));c.setPreTimer({...c.preTimer,hour:m})},children:[e("li",{}),e("li",{}),[...Array(24).keys()].map((r,m)=>e("li",{onClick:A=>P(A.target),children:r<10?`0${r}`:r},m)),e("li",{}),e("li",{})]})}),e("div",{children:i("ul",{onScroll:r=>{let m=Math.floor(r.target.scrollTop/(r.target.scrollHeight/64));c.setPreTimer({...c.preTimer,minute:m})},children:[e("li",{}),e("li",{}),[...Array(60).keys()].map((r,m)=>e("li",{onClick:A=>P(A.target),children:r<10?`0${r}`:r},m)),e("li",{}),e("li",{})]})}),e("div",{className:"selected"})]}),i("div",{className:"settings",children:[i("div",{className:"item",children:[e("div",{className:"label",children:n("APPS.CLOCK.ALARM.LABEL")}),e(y,{type:"text",placeholder:n("APPS.CLOCK.ALARM.TITLE"),onChange:r=>{a(r.target.value)}})]}),i("div",{className:"item",children:[e("div",{className:"label",children:n("APPS.CLOCK.ALARM.SOUND")}),e(E,{disabled:!0,checked:!0})]}),i("div",{className:"item",children:[e("div",{className:"label",children:n("APPS.CLOCK.ALARM.SNOOZE")}),e(E,{disabled:!0,checked:!1})]})]})]})]})}function O(t){let h=t.disabled,a=t.active;return e("div",{className:H("button",a&&"active",h&&"disabled"),children:e("div",{className:"button-inner",style:{fontSize:t.content.length>7?"12px":"18px"},onClick:()=>{t.onClick()},children:t.content})})}function B(){const t=f(T.Stopwatch);return i("div",{className:"stopwatch-container",children:[e("div",{className:"clock",children:w(t.time,!0)}),i("div",{className:"actions",children:[e(O,{content:t.running||!t.running&&t.time==0?n("APPS.CLOCK.STOPWATCH.LAP"):n("APPS.CLOCK.STOPWATCH.RESET"),onClick:()=>{!t.running&&t.time!==0?T.Stopwatch.set({running:!1,time:0,laps:[]}):t.time>0&&T.Stopwatch.set({...t,laps:[...t.laps,t.time]})},disabled:!t.running&&t.time===0}),e(O,{active:t.running,onClick:()=>T.Stopwatch.set({...t,running:!t.running}),content:t.running?n("APPS.CLOCK.STOPWATCH.STOP"):n("APPS.CLOCK.STOPWATCH.START")})]}),e("div",{className:"laps",children:t.laps.map((h,a)=>i("div",{className:"lap",children:[i("div",{className:"label",children:[n("APPS.CLOCK.STOPWATCH.LAP")," ",a+1]}),e("div",{className:"time",children:w(a===0?h:h-t.laps[a-1],!0)})]},a))})]})}function Y(){const t=f(R),h=f(p.Settings),a=f(T.Timer),[c,C]=S.useState({hours:0,minutes:0,seconds:0}),r=S.useRef(null),m=S.useRef(null),A=S.useRef(null),[v,o]=S.useState(null);S.useEffect(()=>{let l=new Date(Date.now()+a.time*1e3);o(l.toLocaleTimeString(t.DateLocale,{hour:"numeric",minute:"numeric",hour12:h.time.twelveHourClock}))},[]);const d=()=>{let l=c.hours*3600+c.minutes*60+c.seconds;if(l>0){T.Timer.set({running:!0,time:l});let s=new Date(Date.now()+l*1e3);o(s.toLocaleTimeString(t.DateLocale,{hour:"numeric",minute:"numeric",hourCycle:"h23"}))}};return S.useEffect(()=>{var l,s,u;if(!a.running){T.Timer.set({running:!1,time:0});let L=(l=r.current)==null?void 0:l.querySelector(".active"),g=(s=m.current)==null?void 0:s.querySelector(".active"),N=(u=A.current)==null?void 0:u.querySelector(".active");L&&(L==null||L.scrollIntoView({block:"center"})),g&&(g==null||g.scrollIntoView({block:"center"})),N&&(N==null||N.scrollIntoView({block:"center"}))}},[a.running]),i("div",{className:"timer-container",children:[a.running?i(b,{children:[i("div",{className:"timer-wrapper",children:[e("div",{className:"border-wrapper",children:e(W,{value:a.time/(c.hours*3600+c.minutes*60+c.seconds)*100,strokeWidth:2,styles:V({strokeLinecap:"butt",pathColor:"#ff9f0a",trailColor:"#2d2d2d",pathTransitionDuration:.5})})}),i("div",{className:"timer",children:[e("div",{className:"timer-text",children:w(a.time,!1)}),v&&i("div",{className:"when-done",children:[e(j,{}),v]})]})]}),e("div",{className:"margin"})]}):i("div",{className:"picker","data-margin":!0,children:[i("div",{ref:r,children:[i("ul",{onScroll:l=>{let s=Math.floor(l.target.scrollTop/(l.target.scrollHeight/29));C({...c,hours:s})},children:[e("li",{}),e("li",{}),[...Array(24).keys()].map((l,s)=>e("li",{onClick:u=>P(u.target),className:c.hours===l?"active":"",children:e("span",{children:l})},s)),e("li",{}),e("li",{})]}),e("div",{className:"label",children:n("APPS.CLOCK.TIMER.HOURS")})]}),i("div",{ref:m,children:[i("ul",{onScroll:l=>{let s=Math.floor(l.target.scrollTop/(l.target.scrollHeight/65));C({...c,minutes:s})},children:[e("li",{}),e("li",{}),[...Array(60).keys()].map((l,s)=>e("li",{onClick:u=>P(u.target),className:c.minutes===l?"active":"",children:l},s)),e("li",{}),e("li",{})]}),e("div",{className:"label",children:n("APPS.CLOCK.TIMER.MINUTES")})]}),i("div",{ref:A,children:[i("ul",{onScroll:l=>{let s=Math.floor(l.target.scrollTop/(l.target.scrollHeight/65));C({...c,seconds:s})},children:[e("li",{}),e("li",{}),[...Array(60).keys()].map((l,s)=>e("li",{onClick:u=>P(u.target),className:c.seconds===l?"active":"",children:l},s)),e("li",{}),e("li",{})]}),e("div",{className:"label",children:n("APPS.CLOCK.TIMER.SECONDS")})]}),e("div",{className:"selected"})]}),i("div",{className:"actions",children:[e(O,{content:n("APPS.CLOCK.TIMER.CANCEL"),onClick:()=>{a.running&&T.Timer.set({running:!1,time:0})},disabled:!a.running}),e(O,{content:a.running?n("APPS.CLOCK.TIMER.STOP"):n("APPS.CLOCK.TIMER.START"),onClick:()=>{a.running?T.Timer.set({...a,running:!1}):d()},active:!1})]})]})}function z(){const t=f(R),h=f(p.Settings),a=t.world_clock_locations,c=r=>new Date().toLocaleTimeString(t.DateLocale,{timeZone:a[r],hour:"2-digit",minute:"2-digit",hour12:h.time.twelveHourClock}),C=r=>{const m=new Date;let A=m.toLocaleTimeString([],{hour:"2-digit",hour12:!1}),v=m.toLocaleDateString([],{day:"numeric"}),o=m.toLocaleTimeString([],{hour:"2-digit",hour12:!1,timeZone:a[r]}),d=m.toLocaleDateString([],{day:"numeric",timeZone:a[r]}),l=parseInt(o)-parseInt(A);return d>v?`${n("APPS.CLOCK.WORLDCLOCK.TOMORROW")} ${l>0?"+":""}${l}HRS`:d<v?`${n("APPS.CLOCK.WORLDCLOCK.YESTERDAY")} ${l>0?"+":""}${l}HRS`:`${n("APPS.CLOCK.WORLDCLOCK.TODAY")} ${l>0?"+":""}${l}HRS`};return i("div",{className:"worldclock-container",children:[e("div",{className:"worldclock-header",children:e("div",{className:"worldclock-title",children:n("APPS.CLOCK.WORLDCLOCK.TITLE")})}),e("div",{className:"worldclock-content",children:Object.keys(a).map((r,m)=>i("div",{className:"worldclock",children:[i("div",{className:"worldclock-location",children:[e("div",{className:"difference",children:C(r)}),e("div",{className:"location",children:r})]}),e("div",{className:"time",children:c(r)})]},m))})]})}function ee(){var d;const t=f(p.App),[h,a]=S.useState(((d=t==null?void 0:t.data)==null?void 0:d.view)??n("APPS.CLOCK.TIMER.TITLE"));let c={"World Clock":n("APPS.CLOCK.WORLDCLOCK.TITLE"),Alarm:n("APPS.CLOCK.ALARM.TITLE"),Stopwatch:n("APPS.CLOCK.STOPWATCH.TITLE"),Timer:n("APPS.CLOCK.TIMER.TITLE")};const C=[e(z,{}),e(_,{}),e(B,{}),e(Y,{})],r=[e(x,{}),e(F,{}),e(U,{}),e(Z,{})],[m,A]=S.useState([]),[v,o]=S.useState([]);return S.useEffect(()=>{let l=[],s=[];Object.keys(c).forEach((u,L)=>{l[c[u]]=C[L],s[c[u]]=r[L]}),A(l),o(s)},[]),i("div",{className:"clock-container",children:[e("div",{className:"clock-body",children:m[h]}),e("div",{className:"clock-footer",children:Object.keys(v).map((l,s)=>i("div",{className:`${h==l?"active":""}`,style:{fontSize:l.length>10?"13px":"14px"},onClick:()=>a(l),children:[v[l],l]},s))})]})}const w=(t,h)=>{if(h){let a=t%100,c=Math.floor(t/100)%60,C=Math.floor(t/6e3)%60,r=Math.floor(t/36e4)%24;return r>0?`${r.toString().padStart(2,"0")}:${C.toString().padStart(2,"0")}:${c.toString().padStart(2,"0")}.${a.toString().padStart(2,"0")}`:`${C.toString().padStart(2,"0")}:${c.toString().padStart(2,"0")}.${a.toString().padStart(2,"0")}`}else{let a=t%60,c=Math.floor(t/60)%60;return`${(Math.floor(t/3600)%24).toString().padStart(2,"0")}:${c.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}`}},P=t=>{t&&t.scrollIntoView({behavior:"smooth",block:"center"})};export{ee as default,w as formatTime,P as snapElement};
