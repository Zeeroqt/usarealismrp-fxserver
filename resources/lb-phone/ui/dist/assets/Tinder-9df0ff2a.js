import{R as O,r as c,a as o,j as e,F as W}from"./jsx-runtime-7cf68bf7.js";import{f as L,L as h,x as $,b as J,a5 as be,e as ye,bY as K,bh as q,Q as ie,C as U,c as le,aK as ve,aE as Ne,j as B,a as Q,u as pe,bZ as Se,au as he,i as te,aw as Ie,E as ue,aQ as Me,bJ as Te,w as Ce,a7 as Ae,d as De,S as se}from"./PhoneProvider-fb5cb781.js";import{S as Ee}from"./Phone-d1a23bb8.js";import{a as xe}from"./DotSpinner-78700c87.js";import"./number-28525126.js";import"./color-e1a4c391.js";import"./index.esm-3a7b91c6.js";import"./AppStore-52953299.js";import"./Pin-e697d693.js";var oe=function(r){return new Promise(function(i){setTimeout(i,r)})};const R={snapBackDuration:300,maxTilt:5,bouncePower:.1,swipeThreshold:100},Re=s=>{const r=window.getComputedStyle(s),i=r.getPropertyValue("width"),a=Number(i.split("px")[0]),u=r.getPropertyValue("height"),N=Number(u.split("px")[0]);return{x:a,y:N}},me=(s,r)=>Math.sqrt(Math.pow(s,2)+Math.pow(r,2)),ke=(s,r=1)=>{const i=Math.sqrt(Math.pow(s.x,2)+Math.pow(s.y,2));return{x:s.x*r/i,y:s.y*r/i}},ne=async(s,r,i=!1)=>{const a=X(s),u=Re(document.body),N=me(u.x,u.y),g=me(r.x,r.y),f=N/g,w=N/g,I=ce(r.x*w+a.x,-r.y*w+a.y);let M="";const d=200;i?s.style.transition="ease "+f+"s":s.style.transition="ease-out "+f+"s",G(s)===0?M=Y((Math.random()-.5)*d):G(s)>0?M=Y(Math.random()*d/2+G(s)):M=Y((Math.random()-1)*d/2+G(s)),s.style.transform=I+M,await oe(f*1e3)},ge=async s=>{s.style.transition=R.snapBackDuration+"ms";const r=X(s),i=ce(r.x*-R.bouncePower,r.y*-R.bouncePower),a=Y(G(s)*-R.bouncePower);s.style.transform=i+a,await oe(R.snapBackDuration*.75),s.style.transform="none",await oe(R.snapBackDuration),s.style.transition="10ms"},fe=s=>{if(Math.abs(s.x)>Math.abs(s.y)){if(s.x>R.swipeThreshold)return"right";if(s.x<-R.swipeThreshold)return"left"}else{if(s.y>R.swipeThreshold)return"up";if(s.y<-R.swipeThreshold)return"down"}return"none"},we=(s,r)=>{const i=r.x-s.x,a=s.y-r.y,u=(r.time-s.time)/1e3;return{x:i/u,y:a/u}},ce=(s,r)=>"translate("+s+"px)",Y=s=>"rotate("+s+"deg)",X=s=>{const r=window.getComputedStyle(s),i=new DOMMatrix(r.transform);return{x:i.m41,y:-i.m42}},G=s=>{const r=window.getComputedStyle(s),i=new DOMMatrix(r.transform);return-Math.asin(i.m21)/(2*Math.PI)*360},Le=(s,r,i,a)=>{const u={x:s.x+i.x,y:s.y+i.y},N={x:u.x,y:u.y,time:new Date().getTime()},g=ce(u.x),f=we(a,N).x/1e3,w=Y(f*R.maxTilt);return r.style.transform=g+w,N},ae=s=>{const r=s.targetTouches[0];return{x:r.clientX,y:r.clientY}},re=s=>({x:s.clientX,y:s.clientY}),_e=O.forwardRef(({flickOnSwipe:s=!0,children:r,onSwipe:i,onCardLeftScreen:a,className:u,preventSwipe:N=[],swipeRequirementType:g="velocity",swipeThreshold:f=R.swipeThreshold,onSwipeRequirementFulfilled:w,onSwipeRequirementUnfulfilled:I},M)=>{R.swipeThreshold=f;const d=O.useRef(!1),l=O.useRef();O.useImperativeHandle(M,()=>({async swipe(E="right"){i&&i(E);const n=1e3,P=(Math.random()-.5)*100;E==="right"?await ne(l.current,{x:n,y:P},!0):E==="left"&&await ne(l.current,{x:-n,y:P},!0),l.current.style.display="none",a&&a(E)},async restoreCard(){l.current.style.display="block",await ge(l.current)}}));const p=O.useCallback(async(E,n)=>{if(d.current)return;d.current=!0;const P=X(E),C=fe(g==="velocity"?n:P);if(C!=="none"&&(i&&i(C),s&&!N.includes(C))){const k=g==="velocity"?n:ke(P,600);await ne(E,k),E.style.display="none",a&&a(C);return}ge(E)},[d,s,i,a,N,g]),b=O.useCallback(()=>{d.current=!1},[d]);return O.useLayoutEffect(()=>{let E={x:null,y:null},n={x:0,y:0},P={x:0,y:0,time:new Date().getTime()},C=!1,k="none";l.current.addEventListener("touchstart",t=>{t.preventDefault(),b(),E={x:-ae(t).x,y:-ae(t).y}}),l.current.addEventListener("mousedown",t=>{t.preventDefault(),C=!0,b(),E={x:-re(t).x,y:-re(t).y}});const v=t=>{if(w||I){const T=fe(g==="velocity"?n:X(l.current));T!==k&&(k=T,k==="none"?I&&I():w&&w(T))}const y=Le(t,l.current,E,P);n=we(P,y),P=y};l.current.addEventListener("touchmove",t=>{t.preventDefault(),v(ae(t))}),l.current.addEventListener("mousemove",t=>{t.preventDefault(),C&&v(re(t))}),l.current.addEventListener("touchend",t=>{t.preventDefault(),p(l.current,n)}),l.current.addEventListener("mouseup",t=>{C&&(t.preventDefault(),C=!1,p(l.current,n))}),l.current.addEventListener("mouseleave",t=>{C&&(t.preventDefault(),C=!1,p(l.current,n))})},[]),O.createElement("div",{ref:l,className:u},r)});function de(){const{View:s}=c.useContext(H),[r,i]=s;return o("div",{className:"home-header",children:[e("img",{src:"./assets/img/icons/tinder/profile.svg",onClick:()=>i("profile")}),e("img",{className:"logo",src:"./assets/img/icons/tinder/logo.svg",onClick:()=>i("home")}),e("img",{src:"./assets/img/icons/tinder/messages.svg",onClick:()=>i("messageList")})]})}function Ve(){const{View:s,User:r}=c.useContext(H),[i,a]=s,[u,N]=r,[g,f]=c.useState([]),[w,I]=c.useState(0),[M,d]=c.useState(),l=c.useRef(w),p=c.useRef(0),[b,E]=c.useState([]),[n,P]=c.useState(0),[C,k]=c.useState(!1),[v,t]=c.useState(null);let[y,T]=c.useState("");c.useEffect(()=>{L("Tinder",{action:"getFeed",page:0}).then(m=>{m&&m.length>0?(f(m),I(m.length-1),p.current=m.length,E(Array(m.length).fill(0).map(D=>O.createRef()))):k(!0)})},[]);const S=m=>{I(m),l.current=m},A=w<g.length-1,_=w>=0,z=(m,D,V)=>{d(m),S(V-1),ee(),m==="right"?L("Tinder",{action:"swipe",like:!0,number:D.number}).then(Pe=>{Pe&&t(D)}):m==="left"&&L("Tinder",{action:"swipe",like:!1,number:D.number})},j=(m,D)=>{l.current>=D&&b[D].current.restoreCard()},x=async m=>{_&&w<g.length&&(await b[w].current.swipe(m),ee())},F=async()=>{var D,V;if(!A)return;const m=w+1;S(m),await((V=(D=b[m])==null?void 0:D.current)==null?void 0:V.restoreCard())},ee=()=>{if(p.current>1){p.current=p.current-1;return}L("Tinder",{action:"getFeed",page:n+1}).then(m=>{if(m)if(m&&m.length>0){P(n+1);let D=m.length+g.length;f(V=>(V=[...V,...m],V)),p.current=m.length,I(D-1),E(Array(D).fill(0).map(V=>O.createRef()))}else k(!0)})};return o("div",{className:`home-wrapper slide ${i=="profile"?"left":"right"}`,children:[e(de,{}),v&&o("div",{className:"match",style:{backgroundImage:`url(${v.photos[0]})`},children:[e("img",{className:"match-image",src:"./assets/img/icons/tinder/match.png"}),o("div",{className:"likes-too",children:[v.name," ",h("APPS.TINDER.LIKES_YOU_TOO").toLowerCase()]}),o("div",{className:"input",children:[e($,{type:"text",placeholder:h("APPS.TINDER.SAY_SOMETHING_NICE"),onChange:m=>T(m.target.value)}),e("div",{className:"send",onClick:()=>{L("Tinder",{action:"sendMessage",data:{recipient:v.number,content:y}}).then(m=>{m&&(N(v),a("message"))})},children:h("APPS.TINDER.SEND")})]}),e("div",{className:"keep-swiping",onClick:()=>{t(null)},children:h("APPS.TINDER.KEEP_SWIPING")})]}),o("div",{className:"home-body",children:[o("div",{className:"cards",children:[C&&e("div",{className:"card no-more",children:e("div",{children:h("APPS.TINDER.NO_MORE")})}),g.map((m,D)=>e(_e,{ref:b[D],className:"swipe",onSwipe:V=>z(V,m,D),onCardLeftScreen:()=>j(m,D),children:e(Oe,{user:m})},D))]}),o("div",{className:"actions",children:[e("div",{className:"button red",onClick:()=>x("left"),children:e("img",{src:"./assets/img/icons/tinder/close.svg"})}),e("div",{className:`button yellow small ${A?"":"disabled"}`,onClick:()=>F(),children:e("img",{src:"./assets/img/icons/tinder/undo.svg"})}),e("div",{className:"button green",onClick:()=>x("right"),children:e("img",{src:"./assets/img/icons/tinder/heart.svg"})})]})]})]})}const Oe=s=>{let r=s.user;const[i,a]=c.useState(0),[u,N]=c.useState(0);return c.useEffect(()=>{N(Z(r.dob))},[r]),o("div",{className:"card",style:{backgroundImage:`url(${r.photos[i]})`},onClick:g=>{i<r.photos.length-1?a(i+1):a(0)},children:[r.photos.length>1&&e("div",{className:"image-count",children:r.photos.map((g,f)=>e("div",{className:`image ${f==i?"active":""}`,onClick:w=>{w.stopPropagation(),a(f)}}))}),o("div",{className:"card-content",children:[o("div",{className:"name",children:[r.name," ",e("span",{children:u})]}),e("div",{className:"description",children:r.bio})]})]})};function $e(){const{Func:s}=c.useContext(Ee),{LoggedIn:r,Account:i}=c.useContext(H),a=J(Q.PhoneNumber),[u,N]=s.TextColor,[g,f]=i,[w,I]=r,[M,d]=c.useState("notLoggedIn"),[l,p]=c.useState(0),[b,E]=c.useState({});c.useEffect(()=>{M=="notLoggedIn"?N("#ffffff"):N("#000000")},[M]);const[n,P]=c.useState({name:null,photos:[],_dob:{day:"",month:"",year:""},dob:null,bio:null,showMen:!1,showWomen:!1,isMale:null}),C=v=>{var t,y,T;switch(v){case 0:let S=new Date(`${(t=n._dob)==null?void 0:t.year}/${(y=n._dob)==null?void 0:y.month}/${(T=n._dob)==null?void 0:T.day}`);if(k(S)){let A=Z(S);n.name&&n.name.length>=2&&A>=18&&A<=100&&(P({...n,dob:S.getTime()}),p(v+1))}break;case 1:n.photos.length>0&&p(v+1);break;case 2:n.bio&&n.bio.length>=10&&p(v+1);break;case 3:(n.showMen||n.showWomen)&&p(v+1);break;case 4:(n.isMale==!0||n.isMale==!1)&&L("Tinder",{action:"createAccount",data:{...n,dob:new Date(n.dob).toISOString().split("T")[0]}}).then(A=>{A&&(B.APPS.TINDER.account.set(n),f(n),I(!0))});break}},k=v=>v.getTime()===v.getTime();return e("div",{className:"login-container",style:{background:M==="notLoggedIn"?"linear-gradient(45deg, #fd267a, #ff6036)":"#ffffff"},children:M==="notLoggedIn"?o(W,{children:[e("svg",{className:"logo",viewBox:"0 0 519 123",children:o("g",{fill:"none",fillRule:"evenodd",children:[e("title",{children:h("APPS.TINDER.TITLE")}),e("path",{d:"M31.5 49.6C55 41.5 59 20.4 56 1c0-.7.6-1.2 1.2-1C79.7 11 105 35 105 71c0 27.6-21.4 52-52.5 52a50 50 0 0 1-28.2-92.7c.6-.4 1.4 0 1.4.7.3 3.7 1.3 13 5.4 18.6h.4z",fill:"#ffffff"}),e("path",{d:"M171.2 101.1l1.7-2 5.3 16.8-.7.7c-4 3.7-10 5.6-17.7 5.6h-.3c-7 0-12.5-2-16.3-5.7-3.8-3.8-5.8-9.5-5.8-16.7V54h-13.5V35.5h13.5V13.2h20.8v22.3h16.5V54h-16.6v41.3c0 1.9.5 8 6.3 8 3 0 5.8-1.1 6.8-2.3zm11 19.2V35.6H203v84.7h-20.8zM192.5 1A12.5 12.5 0 1 1 180 13.6C180 6.8 185.7 1 192.5 1zm66.4 32.5c18 0 27.9 9.8 27.9 27.7v59H266V66.2c-.4-9.6-5-14-14.8-14-8.8 0-15.9 5.4-19.5 10v58h-20.8V35.7h20.8v9c6-5.8 15.6-11 27.2-11zM356 44.4V4.6h20.8v115.8H356v-8.8a34.3 34.3 0 0 1-24.7 10.7c-22.7 0-37.9-17.8-37.9-44.3 0-26.6 15.2-44.4 37.9-44.4A34 34 0 0 1 356 44.4zm0 17.9a25.6 25.6 0 0 0-19.6-10c-12.9 0-21.5 10.3-21.5 25.7 0 15.3 8.6 25.6 21.5 25.6 7.5 0 15.7-4 19.6-9.8V62.3zm69.4-28.7c24.6 0 41.7 19 41.7 46v5.7h-62.9c2.1 11.9 11.5 19.5 24.3 19.5 8.1 0 17-3.5 22.1-8.6L452 95l9.9 14.2-1 .9a48.6 48.6 0 0 1-34.1 12.2c-26 0-44.3-18.3-44.3-44.4a42.8 42.8 0 0 1 43-44.3zm-21.3 36h42.7c-1.2-12.7-11.7-18.5-21.4-18.5-14.6 0-20.1 11-21.3 18.6zm113.3-36h1.5v21l-1.8-.3c-1.5-.3-3.4-.5-5.3-.5-6.7 0-16 4.7-19.5 9.7v56.7h-20.8V35.6h20.9V45c6.9-7.2 16-11.4 25-11.4z",fill:"#ffffff"})]})}),o("div",{className:"buttons",children:[e("div",{className:"disclamer",children:h("APPS.TINDER.AGREE_TERMS")}),e("div",{className:"button create",onClick:()=>{d("createAccount")},children:h("APPS.TINDER.CREATE_ACCOUNT")})]})]}):o("div",{className:"create-account",children:[e(be,{className:"chevron",onClick:()=>{l>0?p(l-1):d("notLoggedIn")}}),l==0&&o(W,{children:[e("div",{className:"title",children:h("APPS.TINDER.CREATE_ACCOUNT")}),o("div",{className:"form-body",children:[e($,{defaultValue:ye(a),type:"text",disabled:!0}),e($,{placeholder:"Name",type:"text",maxLength:25,onChange:v=>{P({...n,name:v.target.value}),v.target.value.length>=3?E({...b,name:!0}):E({...b,name:!1})}}),o("div",{className:"dob",children:[o("div",{className:"inputs",children:[e($,{placeholder:"MM",type:"text",pattern:"/^-?\\d+\\.?\\d*$/",minLength:2,maxLength:2,onChange:v=>{P({...n,_dob:{...n._dob,month:v.target.value}})}}),e("span",{children:"/"}),e($,{placeholder:"DD",type:"text",pattern:"/^-?\\d+\\.?\\d*$/",minLength:2,maxLength:2,onChange:v=>{P({...n,_dob:{...n._dob,day:v.target.value}})}}),e("span",{children:"/"}),e($,{placeholder:"YYYY",type:"text",pattern:"/^-?\\d+\\.?\\d*$/",minLength:4,maxLength:4,onChange:v=>{var S,A,_;let t={...n,_dob:{...n._dob,year:v.target.value}};P(t);let y=new Date(`${(S=t._dob)==null?void 0:S.year}/${(A=t._dob)==null?void 0:A.month}/${(_=t._dob)==null?void 0:_.day}`),T=Z(y);T>=18&&T<100?E({...b,18:!0}):E({...b,18:!1})}})]}),e("div",{className:"disclamer",children:h("APPS.TINDER.AGE_PUBLIC")}),o("div",{className:"requirement",children:[b[18]?e(K,{className:"green"}):e(q,{className:"red"}),h("APPS.TINDER.BE_OVER_18")]}),o("div",{className:"requirement",children:[b.name?e(K,{className:"green"}):e(q,{className:"red"}),h("APPS.TINDER.NAME_MINIMUM")]})]})]})]}),l==1&&o(W,{children:[e("div",{className:"title",children:h("APPS.TINDER.ADD_PHOTOS")}),e("div",{className:"photo-grid",children:[...Array(6)].map((v,t)=>{var T;let y=((T=n.photos)==null?void 0:T[t-1])||t==0;return n.photos[t]?e("div",{className:"photo",style:{backgroundImage:`url(${n.photos[t]})`},children:e("div",{className:"button remove",onClick:()=>{let S=n.photos;S.splice(t,1),P({...n,photos:S}),S.length==0&&E({...b,photos:!1})},children:e(ie,{})})}):e("div",{className:"photo",children:y&&e("div",{className:"button add",onClick:()=>{var S,A,_;U.Gallery.set({allowExternal:(_=(A=(S=le)==null?void 0:S.value)==null?void 0:A.AllowExternal)==null?void 0:_.Tinder,onSelect:z=>P({...n,photos:[...n.photos,z.src]})}),E({...b,photos:!0})},children:e(ve,{})})})})}),o("div",{className:"requirement",children:[b.photos?e(K,{className:"green"}):e(q,{className:"red"}),h("APPS.TINDER.PHOTOS_MINIMUM")]})]}),l==2&&o(W,{children:[e("div",{className:"title",children:h("APPS.TINDER.DESCRIPTION")}),e(Ne,{placeholder:"Description",maxLength:200,onChange:v=>{P({...n,bio:v.target.value}),v.target.value.length>=10?E({...b,bio:!0}):E({...b,bio:!1})}}),o("div",{className:"requirement",children:[b.bio?e(K,{className:"green"}):e(q,{className:"red"}),h("APPS.TINDER.DESCRIPTION_MINIMUM")]})]}),l==3&&o(W,{children:[e("div",{className:"title",children:h("APPS.TINDER.SHOW_ME")}),o("div",{className:"showme",children:[e("div",{className:`button border ${n.showWomen&&!n.showMen?"active":""}`,onClick:()=>{P({...n,showMen:!1,showWomen:!0})},children:h("APPS.TINDER.WOMEN")}),e("div",{className:`button border ${n.showMen&&!n.showWomen?"active":""}`,onClick:()=>{P({...n,showMen:!0,showWomen:!1})},children:h("APPS.TINDER.MEN")}),e("div",{className:`button border ${n.showMen&&n.showWomen?"active":""}`,onClick:()=>{P({...n,showMen:!0,showWomen:!0})},children:h("APPS.TINDER.EVERYONE")})]})]}),l==4&&o(W,{children:[e("div",{className:"title",children:h("APPS.TINDER.I_AM")}),o("div",{className:"showme",children:[e("div",{className:`button border ${n.isMale===!0?"active":""}`,onClick:()=>{P({...n,isMale:!0})},children:h("APPS.TINDER.MALE")}),e("div",{className:`button border ${n.isMale===!1?"active":""}`,onClick:()=>{P({...n,isMale:!1})},children:h("APPS.TINDER.FEMALE")})]})]}),e("div",{className:"button gradient",onClick:()=>C(l),children:h("APPS.TINDER.CONTINUE")})]})})}function Fe(){var v;const{View:s,User:r}=c.useContext(H);J(Q.Settings);const i=J(Q.PhoneNumber),[a,u]=r,[N,g]=s,[f,w]=c.useState([]),[I,M]=c.useState(0),[d,l]=c.useState(!1),[p,b]=c.useState(!1),E=c.useRef(null),[n,P]=c.useState({content:"",attachments:[]});c.useEffect(()=>{L("Tinder",{action:"getMessages",page:0,number:a.number}).then(t=>{t&&t.length>0?w(t.reverse()):l(!0)})},[]);const C=()=>{if(n.content.length===0&&n.attachments.length===0)return;const t={sender:i,recipient:a.number,content:n.content,attachments:n.attachments,timestamp:new Date().getTime()};L("Tinder",{action:"sendMessage",data:t}).then(y=>{y&&(E.current.value="",P({content:"",attachments:[]}),w([...f,t]))})};c.useEffect(()=>{let t=document.querySelector(".message-container");t.scrollTop=t.scrollHeight},[f]);const k=t=>{if(d||p)return;let y=document.querySelector("#last");if(!y)return;!Ce(y)&&(b(!0),L("Tinder",{action:"getMessages",page:I+1,number:a.number}).then(S=>{S&&S.length>0?(w([...S.reverse(),...f]),b(!1)):l(!0)}),M(S=>S+1))};return pe("tinder:newMessage",t=>{a.number===t.sender&&w([...f,t])}),o("div",{className:"home-wrapper slide left",children:[o("div",{className:"message-header",children:[e(Se,{onClick:()=>{g("messageList"),u(null)}}),o("div",{className:"user",children:[e("img",{className:"profile-picture",src:(v=a.photos)==null?void 0:v[0]}),e("div",{className:"name",children:a.name})]})]}),e("div",{className:"message-container",onScroll:k,children:e("div",{className:"message-body",children:f.map((t,y)=>{var z,j;let T,S=y===0?"last":"",A=t.sender===i?"self":"other",_=((z=f[y+1])==null?void 0:z.sender)===i?"self":"other";return f[y+1]?T=Math.abs(t.timestamp-f[y+1].timestamp)/36e5:_=void 0,o("div",{className:`message ${A}`,id:S,children:[A=="other"?o("div",{className:"message-with-pfp",children:[e("div",{className:`profile-picture ${A!==_?"show":"hide"}`,children:e("img",{src:(j=a.photos)==null?void 0:j[0]})}),o("div",{className:"message-content",children:[t.content&&e("div",{className:"content",children:he(t.content)}),t.attachments.length>0&&e("div",{className:"attatchments",children:t.attachments.map((x,F)=>te(x)?e("video",{src:x,controls:!1,loop:!0,autoPlay:!0,muted:!0,onClick:ee=>{U.FullscreenImage.set({display:!0,image:x})}},F):e(Ie,{src:x,onClick:()=>{U.FullscreenImage.set({display:!0,image:x})}},F))})]})]}):o(W,{children:[t.content&&e("div",{className:"content",children:he(t.content)}),t.attachments.length>0&&e("div",{className:"attatchments",children:t.attachments.map((x,F)=>te(x)?e("video",{src:x,controls:!1,loop:!0,autoPlay:!0,muted:!0,onClick:()=>{U.FullscreenImage.set({display:!0,image:x})}},F):e("img",{src:x,onClick:()=>{U.FullscreenImage.set({display:!0,image:x})}},F))})]}),f[y+1]&&T>6?e("div",{className:"date",children:ue(t.timestamp)}):A!==_&&e("div",{className:"date",children:ue(t.timestamp)})]},y)})})}),e("div",{className:"attachments",children:n.attachments.map((t,y)=>o("div",{className:"attachment",children:[te(t)?e("video",{src:t,controls:!1,muted:!0,loop:!0,autoPlay:!0}):e("img",{src:t}),e(ie,{onClick:()=>{P({...n,attachments:n.attachments.filter((T,S)=>S!==y)})}})]}))}),o("div",{className:"message-bottom",children:[e(Me,{className:"image",onClick:()=>{var t,y,T;n.attachments.length<3&&U.Gallery.set({includeVideos:!0,allowExternal:(T=(y=(t=le)==null?void 0:t.value)==null?void 0:y.AllowExternal)==null?void 0:T.Messages,onSelect:S=>P({...n,attachments:[...n.attachments,S.src]})})}}),o("div",{className:"input",children:[e($,{type:"text",placeholder:"Type a message...",ref:E,onChange:t=>{P({...n,content:t.target.value})},onKeyDown:t=>{t.key==="Enter"&&C()}}),e(Te,{className:n.attachments.length>0||n.content.length>0?"active":"",onClick:()=>C()})]})]})]})}function We(){const{Func:s}=c.useContext(Ee),{View:r,User:i}=c.useContext(H),[a,u]=s.TextColor,[N,g]=i,[f,w]=r,[I,M]=c.useState({newMatches:[],messages:[]});return c.useEffect(()=>{u("#000000"),L("Tinder",{action:"getMatches"}).then(d=>{d&&M(d)})},[]),pe("tinder:newMessage",d=>{let l=d.sender,p=JSON.parse(JSON.stringify(I)),b=p.messages.findIndex(E=>E.number===l);if(b!==-1)p.messages.unshift(p.messages.splice(b,1)[0]);else if(b=p.newMatches.findIndex(E=>E.number===l),b!==-1)p.messages.unshift(p.newMatches.splice(b,1)[0]);else return;p.messages[0].lastMessage=d.content,M(p)}),o("div",{className:"home-wrapper slide left",children:[e(de,{}),e(Ae,{placeholder:h("APPS.TINDER.SEARCH_MATCHES"),onChange:()=>{}})," ",o("div",{className:"message-list-body",children:[o("div",{className:"new-matches",children:[o("div",{className:"title",children:[h("APPS.TINDER.NEW_MATCHES"),I.newMatches.length>0&&e("span",{children:I.newMatches.length})]}),e("div",{className:"matches",children:I.newMatches.map((d,l)=>{var p;return o("div",{className:"new-match",onClick:()=>{g(d),w("message")},children:[e("img",{className:"profile-picture",src:(p=d.photos)==null?void 0:p[0]}),e("div",{className:"name",children:d.name})]},l)})})]}),o("div",{className:"recent-messages",children:[e("div",{className:"title",children:h("APPS.TINDER.MESSAGES")}),e("div",{className:"messages",children:I.messages.map((d,l)=>{var p;return d.lastMessage.length===0&&(d.lastMessage=h("APPS.MESSAGES.SENT_A_PHOTO")),o("div",{className:"message",onClick:()=>{g(d),w("message")},children:[e("img",{className:"profile-picture",src:(p=d.photos)==null?void 0:p[0]}),o("div",{className:"user",children:[e("div",{className:"name",children:d.name}),e("div",{className:"message",children:d.lastMessage.length>40?d.lastMessage.substring(0,40)+"...":d.lastMessage})]})]},l)})})]})]})]})}function Ue(){const{Account:s}=c.useContext(H),[r,i]=s,[a,u]=c.useState(r);return o("div",{className:"home-wrapper slide right",style:{backgroundColor:"#F6F6F6"},children:[e(de,{}),o("div",{className:"profile-body",children:[o("div",{className:"user",children:[e("img",{className:"profile-picture",src:a.photos[0]}),o("div",{className:"name",children:[a.name,", ",Z(a.dob)]})]}),o("div",{className:"inputs",children:[o("div",{className:"input",children:[e("div",{className:"label",children:h("APPS.TINDER.NAME")}),e($,{type:"text",defaultValue:a.name,maxLength:10,onChange:N=>{u({...a,name:N.target.value})}})]}),o("div",{className:"input center",children:[e("div",{className:"label",children:h("APPS.TINDER.PHOTOS")}),e("div",{className:"photo-grid",children:[...Array(6)].map((N,g)=>{var w;let f=((w=a.photos)==null?void 0:w[g-1])||g==0;return a.photos[g]?e("div",{className:"photo",style:{backgroundImage:`url(${a.photos[g]})`},children:e("div",{className:"photo-button remove",onClick:()=>{let I=a.photos;I.splice(g,1),u({...a,photos:I})},children:e(ie,{})})},g):e("div",{className:"photo",children:f&&e("div",{className:"photo-button add",onClick:()=>{var I,M,d;U.Gallery.set({allowExternal:(d=(M=(I=le)==null?void 0:I.value)==null?void 0:M.AllowExternal)==null?void 0:d.Tinder,onSelect:l=>u({...a,photos:[...a.photos,l.src]})})},children:e(ve,{})})})})})]}),o("div",{className:"input",children:[e("div",{className:"label",children:h("APPS.TINDER.ABOUT_ME")}),e(Ne,{type:"text",defaultValue:a.bio,maxLength:100,onChange:N=>{u({...a,bio:N.target.value})}})]}),o("div",{className:"input",children:[e("div",{className:"label",children:h("APPS.TINDER.INTERESTED_IN")}),o("select",{value:a.showMen&&a.showWomen?"Everyone":a.showMen?"Men":"Women",onChange:N=>{switch(N.target.value){case"Everyone":u({...a,showMen:!0,showWomen:!0});break;case"Men":u({...a,showMen:!0,showWomen:!1});break;case"Women":u({...a,showMen:!1,showWomen:!0});break}},children:[e("option",{value:"Men",children:h("APPS.TINDER.MEN")}),e("option",{value:"Women",children:h("APPS.TINDER.WOMEN")}),e("option",{value:"Everyone",children:h("APPS.TINDER.EVERYONE")})]})]}),o("div",{className:"input",children:[e("div",{className:"label",children:h("APPS.TINDER.GENDER")}),o("select",{value:a.isMale?"male":"female",onChange:N=>{N.target.value=="male"?u({...a,isMale:!0}):u({...a,isMale:!1})},children:[e("option",{value:"male",children:h("APPS.TINDER.MALE")}),e("option",{value:"female",children:h("APPS.TINDER.FEMALE")})]})]})]}),e("div",{className:"button gradient",onClick:()=>{a.name.length>=2&&a.bio.length>=5&&a.photos.length>=1?L("Tinder",{action:"saveProfile",data:a}).then(N=>{N&&i(a)}):De("error","Issue saving tinder profile, (name not 2 characters, bio not over 5 or no photos)")},children:h("APPS.TINDER.SAVE")})]})]})}const H=c.createContext(null);function Qe(){const s=J(Q.Settings),[r,i]=c.useState(!1),[a,u]=c.useState(null),[N,g]=c.useState(null),[f,w]=c.useState("home"),[I,M]=c.useState(!0),d={home:e(Ve,{}),profile:e(Ue,{}),messageList:e(We,{}),message:e(Fe,{})};return c.useEffect(()=>{if(B.APPS.TINDER.account.value){u(B.APPS.TINDER.account.value),i(!0),M(!1);return}else if(B.APPS.TINDER.account.value===!1)return M(!1);L("Tinder",{action:"isLoggedIn"}).then(l=>{l?(u(l),i(!0),B.APPS.TINDER.account.set(l)):B.APPS.TINDER.account.set(!1),M(!1)})},[]),c.useEffect(()=>(f==="message"?se.ReceiveAppNotifications.set(!1):se.ReceiveAppNotifications.set(!0),()=>{se.ReceiveAppNotifications.set(!0)}),[f]),e("div",{className:"tinder-container",children:e(H.Provider,{value:{LoggedIn:[r,i],Account:[a,u],User:[N,g],View:[f,w]},children:I||s!=null&&s.airplaneMode?e("div",{className:"loading",children:e(xe,{size:55,speed:.9,color:"#000000"})}):r?d[f]:e($e,{})})})}function Z(s){var r=+new Date(s);return~~((Date.now()-r)/315576e5)}export{H as TinderContext,Qe as default,Z as getAge};
